{"version":3,"file":"ArcticMap.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../node_modules/esri-loader/dist/esm/utils/index.js","../../node_modules/esri-loader/dist/esm/utils/url.js","../../node_modules/esri-loader/dist/esm/utils/css.js","../../node_modules/esri-loader/dist/esm/script.js","../../node_modules/esri-loader/dist/esm/modules.js","../../node_modules/esri-loader/dist/esm/esri-loader.js","../../src/lib/ArcticMapButton.js","../../src/lib/ArcticMapLoader.js","../../src/lib/ArcticMapPanel.js","../../src/lib/ArcticMap.js","../../src/lib/ArcticMapLayer.js","../../src/lib/ArcticMapEdit.js","../../src/lib/ArcticMapLLDSearch.js","../../src/lib/ArcticMapLayerPopup.js","../../src/lib/ArcticMapControlArea.js","../../src/lib/ArcticMapIdentify.js","../../src/lib/ArcticMapBaseControl.js","../../src/lib/ArcticMapLayerRenderer.js","../../src/lib/ArcticMapLocator.js","../../src/lib/ArcticMapDatagrid.js","../../src/lib/ArcticMapDGridPanel.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/* Copyright (c) 2022 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\nvar isBrowser = typeof window !== 'undefined';\n// allow consuming libraries to provide their own Promise implementations\nexport default {\n    Promise: isBrowser ? window['Promise'] : undefined\n};\n","/* Copyright (c) 2022 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\nvar DEFAULT_VERSION = '4.25';\nvar NEXT = 'next';\nexport function parseVersion(version) {\n    if (version.toLowerCase() === NEXT) {\n        return NEXT;\n    }\n    var match = version && version.match(/^(\\d)\\.(\\d+)/);\n    return match && {\n        major: parseInt(match[1], 10),\n        minor: parseInt(match[2], 10)\n    };\n}\n/**\n * Get the CDN url for a given version\n *\n * @param version Ex: '4.25' or '3.42'. Defaults to the latest 4.x version.\n */\nexport function getCdnUrl(version) {\n    if (version === void 0) { version = DEFAULT_VERSION; }\n    return \"https://js.arcgis.com/\".concat(version, \"/\");\n}\n/**\n * Get the CDN url for a the CSS for a given version and/or theme\n *\n * @param version Ex: '4.25', '3.42', or 'next'. Defaults to the latest 4.x version.\n */\nexport function getCdnCssUrl(version) {\n    if (version === void 0) { version = DEFAULT_VERSION; }\n    var baseUrl = getCdnUrl(version);\n    var parsedVersion = parseVersion(version);\n    if (parsedVersion !== NEXT && parsedVersion.major === 3) {\n        // NOTE: at 3.11 the CSS moved from the /js folder to the root\n        var path = parsedVersion.minor <= 10 ? 'js/' : '';\n        return \"\".concat(baseUrl).concat(path, \"esri/css/esri.css\");\n    }\n    else {\n        // assume 4.x\n        return \"\".concat(baseUrl, \"esri/themes/light/main.css\");\n    }\n}\n","/* Copyright (c) 2022 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\nimport { getCdnCssUrl, parseVersion } from './url';\nfunction createStylesheetLink(href) {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = href;\n    return link;\n}\nfunction insertLink(link, before) {\n    if (before) {\n        // the link should be inserted before a specific node\n        var beforeNode = document.querySelector(before);\n        beforeNode.parentNode.insertBefore(link, beforeNode);\n    }\n    else {\n        // append the link to then end of the head tag\n        document.head.appendChild(link);\n    }\n}\n// check if the css url has been injected or added manually\nfunction getCss(url) {\n    return document.querySelector(\"link[href*=\\\"\".concat(url, \"\\\"]\"));\n}\nfunction getCssUrl(urlOrVersion) {\n    return !urlOrVersion || parseVersion(urlOrVersion)\n        // if it's a valid version string return the CDN URL\n        ? getCdnCssUrl(urlOrVersion)\n        // otherwise assume it's a URL and return that\n        : urlOrVersion;\n}\n// lazy load the CSS needed for the ArcGIS API\nexport function loadCss(urlOrVersion, before) {\n    var url = getCssUrl(urlOrVersion);\n    var link = getCss(url);\n    if (!link) {\n        // create & load the css link\n        link = createStylesheetLink(url);\n        insertLink(link, before);\n    }\n    return link;\n}\n","/* Copyright (c) 2022 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\nimport { loadCss } from './utils/css';\nimport utils from './utils/index';\nimport { getCdnUrl } from './utils/url';\nvar defaultOptions = {};\nfunction createScript(url) {\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url;\n    script.setAttribute('data-esri-loader', 'loading');\n    return script;\n}\n// add a one-time load handler to script\n// and optionally add a one time error handler as well\nfunction handleScriptLoad(script, callback, errback) {\n    var onScriptError;\n    if (errback) {\n        // set up an error handler as well\n        onScriptError = handleScriptError(script, errback);\n    }\n    var onScriptLoad = function () {\n        // pass the script to the callback\n        callback(script);\n        // remove this event listener\n        script.removeEventListener('load', onScriptLoad, false);\n        if (onScriptError) {\n            // remove the error listener as well\n            script.removeEventListener('error', onScriptError, false);\n        }\n    };\n    script.addEventListener('load', onScriptLoad, false);\n}\n// add a one-time error handler to the script\nfunction handleScriptError(script, callback) {\n    var onScriptError = function (e) {\n        // reject the promise and remove this event listener\n        callback(e.error || new Error(\"There was an error attempting to load \".concat(script.src)));\n        // remove this event listener\n        script.removeEventListener('error', onScriptError, false);\n    };\n    script.addEventListener('error', onScriptError, false);\n    return onScriptError;\n}\n// allow the user to configure default script options rather than passing options to `loadModules` each time\nexport function setDefaultOptions(options) {\n    if (options === void 0) { options = {}; }\n    defaultOptions = options;\n}\n// get the script injected by this library\nexport function getScript() {\n    return document.querySelector('script[data-esri-loader]');\n}\n// has ArcGIS API been loaded on the page yet?\nexport function isLoaded() {\n    var globalRequire = window['require'];\n    // .on() ensures that it's Dojo's AMD loader\n    return globalRequire && globalRequire.on;\n}\n// load the ArcGIS API on the page\nexport function loadScript(options) {\n    if (options === void 0) { options = {}; }\n    // we would have liked to use spread like { ...defaultOptions, ...options }\n    // but TS would inject a polyfill that would require use to configure rollup w content: 'window'\n    // if we have another occasion to use spread, let's do that and replace this for...in\n    var opts = {};\n    [defaultOptions, options].forEach(function (obj) {\n        for (var prop in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n                opts[prop] = obj[prop];\n            }\n        }\n    });\n    // URL to load\n    var version = opts.version;\n    var url = opts.url || getCdnUrl(version);\n    return new utils.Promise(function (resolve, reject) {\n        var script = getScript();\n        if (script) {\n            // the API is already loaded or in the process of loading...\n            // NOTE: have to test against scr attribute value, not script.src\n            // b/c the latter will return the full url for relative paths\n            var src = script.getAttribute('src');\n            if (src !== url) {\n                // potentially trying to load a different version of the API\n                reject(new Error(\"The ArcGIS API for JavaScript is already loaded (\".concat(src, \").\")));\n            }\n            else {\n                if (isLoaded()) {\n                    // the script has already successfully loaded\n                    resolve(script);\n                }\n                else {\n                    // wait for the script to load and then resolve\n                    handleScriptLoad(script, resolve, reject);\n                }\n            }\n        }\n        else {\n            if (isLoaded()) {\n                // the API has been loaded by some other means\n                // potentially trying to load a different version of the API\n                reject(new Error(\"The ArcGIS API for JavaScript is already loaded.\"));\n            }\n            else {\n                // this is the first time attempting to load the API\n                var css = opts.css;\n                if (css) {\n                    var useVersion = css === true;\n                    // load the css before loading the script\n                    loadCss(useVersion ? version : css, opts.insertCssBefore);\n                }\n                // create a script object whose source points to the API\n                script = createScript(url);\n                // _currentUrl = url;\n                // once the script is loaded...\n                handleScriptLoad(script, function () {\n                    // update the status of the script\n                    script.setAttribute('data-esri-loader', 'loaded');\n                    // return the script\n                    resolve(script);\n                }, reject);\n                // load the script\n                document.body.appendChild(script);\n            }\n        }\n    });\n}\n","/* Copyright (c) 2022 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\nimport { getScript, isLoaded, loadScript } from './script';\nimport utils from './utils/index';\n// wrap Dojo's require() in a promise\nfunction requireModules(modules) {\n    return new utils.Promise(function (resolve, reject) {\n        // If something goes wrong loading the esri/dojo scripts, reject with the error.\n        var errorHandler = window['require'].on('error', reject);\n        window['require'](modules, function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            // remove error handler\n            errorHandler.remove();\n            // Resolve with the parameters from dojo require as an array.\n            resolve(args);\n        });\n    });\n}\n// returns a promise that resolves with an array of the required modules\n// also will attempt to lazy load the ArcGIS API if it has not already been loaded\nexport function loadModules(modules, loadScriptOptions) {\n    if (loadScriptOptions === void 0) { loadScriptOptions = {}; }\n    if (!isLoaded()) {\n        // script is not yet loaded, is it in the process of loading?\n        var script = getScript();\n        var src = script && script.getAttribute('src');\n        if (!loadScriptOptions.url && src) {\n            // script is still loading and user did not specify a URL\n            // in this case we want to default to the URL that's being loaded\n            // instead of defaulting to the latest 4.x URL\n            loadScriptOptions.url = src;\n        }\n        // attempt to load the script then load the modules\n        return loadScript(loadScriptOptions).then(function () { return requireModules(modules); });\n    }\n    else {\n        // script is already loaded, just load the modules\n        return requireModules(modules);\n    }\n}\n","/*\n  Copyright (c) 2022 Esri\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n    http://www.apache.org/licenses/LICENSE-2.0\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\n// re-export the functions that are part of the public API\nimport utils from './utils/index';\nexport { loadModules } from './modules';\nexport { getScript, isLoaded, loadScript, setDefaultOptions } from './script';\nexport { loadCss } from './utils/css';\nexport { utils };\n","import React from 'react';\r\n\r\n\r\n\r\n\r\nclass ArcticMapButton extends React.Component {\r\n    static displayName = 'ArcticMapButton';\r\n\r\n\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            enabled: true,\r\n            useEsriIcon: props.esriicon !== null,\r\n            active: props.showactive !== undefined && props.showactive === true\r\n\r\n        }\r\n\r\n       \r\n\r\n        this.fireclick = function (e) {\r\n            if (this.props.onclick) {\r\n                this.props.onclick(e);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        var style = {\r\n            arcticButton: {\r\n                padding: \"5px\",\r\n                height: \"32px\",\r\n                width: \"32px\",\r\n                backgroundColor: \"#fff\",\r\n                color: '#6e6e6e',\r\n                border: 'none',\r\n                display: 'flex',\r\n                flexFlow: 'row nowrap',\r\n                justifyContent: 'center',\r\n                alignItems: 'center',\r\n                cursor: 'pointer',\r\n                '&:hover': {\r\n                    backgroundColor: \"#ccc\"\r\n                }\r\n            }\r\n        };\r\n\r\n        if(this.props.padtop){\r\n            style.arcticButton.marginTop = '10px';\r\n        }\r\n        if(this.props.padbottom){\r\n            style.arcticButton.marginBOttom = '10px';\r\n        }\r\n        \r\n\r\n        if (this.state.useEsriIcon) {\r\n            if (this.props.showactive && this.props.showactive === true) {\r\n                style.arcticButton.backgroundColor = \"#d4d1d1\";\r\n            }\r\n            else{\r\n                style.arcticButton.backgroundColor = \"#fff\";\r\n            }\r\n\r\n            var esriClassName = 'esri-icon esri-icon-' + this.props.esriicon;\r\n\r\n            return (<button style={style.arcticButton} onClick={this.fireclick.bind(this)} title={this.props.title} >\r\n                <span style={{ height: \"15px\", width: \"15px\" }} aria-hidden className={esriClassName} ></span>\r\n            </button>);\r\n\r\n\r\n        } else {\r\n            return (<div></div>);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapButton","import React from 'react';\r\nimport { transform } from 'async';\r\n\r\nvar style = {\r\n    bg: {\r\n        zIndex: \"100\",\r\n        position: \"absolute\",\r\n        top: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: '#5856569e'\r\n\r\n    },\r\n\r\n}\r\nvar loadingtext = {\r\n    position: \"absolute\",\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    color: 'white'\r\n};\r\n\r\nclass ArcticMapLoader extends React.Component {\r\n    static displayName = 'ArcticMapLoader';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n    \r\n        if (this.props.loading === true) {\r\n\r\n\r\n            return (\r\n\r\n                <div style={style.bg}>\r\n                    <h1 style={loadingtext}>Working...</h1>\r\n                </div>\r\n\r\n\r\n            )\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapLoader;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport ArcticMapButton from './ArcticMapButton';\r\n\r\nvar styles = {\r\n    rightWidgetFull: {\r\n        \"position\": \"absolute\",\r\n        \"right\": \"2px\",\r\n        \"top\": \"2px\",\r\n        \"bottom\": \"2px\",\r\n        \"zIndex\": \"100\",\r\n\r\n        \"minWidth\": '30%',\r\n        \"paddingTop\": '20px'\r\n    },\r\n    widgetContainer: {\r\n        \"position\": 'realative',\r\n        \"paddingRight\": \"20px\",\r\n        \"paddingLeft\": \"20px\",\r\n        \"paddingBottom\": \"50px\",\r\n       \r\n        \"overflowY\": 'auto',\r\n        \"maxHeight\": '100%'\r\n    }\r\n\r\n};\r\n\r\nclass ArcticMapPanel extends React.Component {\r\n    static displayName = 'ArcticMapPanel';\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.toggle = function () {\r\n\r\n            var currvalue = this.state.open;\r\n            this.setState({ open: !currvalue });\r\n\r\n            if (this.props.ontoggle) {\r\n                this.props.ontoggle();\r\n            }\r\n        };\r\n        this.toggle = this.toggle.bind(this);\r\n\r\n        this.mapFrame = document.getElementsByClassName('esri-view-root')[0];\r\n        this.renderEle = document.createElement(\"span\");\r\n        this.mapFrame.appendChild(this.renderEle);\r\n        this.state = {\r\n            hidden: !this.props.hidden ? false : true,\r\n            open: this.props.open || false\r\n        };\r\n\r\n        ArcticMapPanel.defaultProps= {\r\n            infoAreaText: \"\"\r\n        }\r\n     \r\n        if(props.map){\r\n            this.map = props.map;\r\n        }\r\n        if(props.view){\r\n            this.view = props.view;\r\n            this.view.on('click', (e) => {\r\n                this.setState({ open: false });\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        \r\n        // console.log(self.props);\r\n        // self.props.view.on('click', (event) => {\r\n\r\n        //     self.setState({ open: false });\r\n\r\n        // });\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.renderPanel();\r\n    }\r\n\r\n    render() {\r\n\r\n        return (<span visibility={this.state.hidden}><ArcticMapButton padtop={this.props.padtop} padbottom={this.props.padbottom} esriicon={this.props.esriicon} onclick={this.toggle.bind(this)} title={this.props.title} ></ArcticMapButton></span>);\r\n    }\r\n\r\n    renderPanel() {\r\n        // refactor this\r\n        if (this.state.open) {\r\n            var ele = React.createElement(\r\n                'div',\r\n                { className: 'esri-widget', style: styles.rightWidgetFull },\r\n                React.createElement(\r\n                    'h2',\r\n                    { style: { \"paddingLeft\": \"20px\", marginTop: '6px',  fontSize: '28px', marginBottom : '10px' } },\r\n                    this.props.title\r\n                ),\r\n                React.createElement(\r\n                    'div',\r\n                    { style: { position: 'absolute', top: '20px', right: '20px' } },\r\n\r\n                    React.createElement(\r\n                        'button',\r\n                        {\r\n                            onClick : this.toggle,\r\n                            title : 'Close',\r\n                            style : { border : 'none', background : 'transparent', cursor : 'pointer'}\r\n                        },\r\n                        React.createElement(\r\n                            'span',\r\n                            {\r\n                               style : { fontSize: '28px' },\r\n                               'aria-hidden' : true,\r\n                               className : 'esri-icon esri-icon-close'\r\n                            },\r\n                        )\r\n                    )\r\n                    //React.createElement(ArcticMapButton, { esriicon: 'close', onclick: this.toggle, style : { fontSize : '28px'} })\r\n                ),\r\n                \r\n                React.createElement(\r\n                    'p',\r\n                    { style: { width: \"300px\", paddingLeft: \"20px\", wordWrap: \"break-word\", margin: \"0px\", whiteSpace: \"pre-line\" } },\r\n                    this.props.infoAreaText\r\n                ),\r\n\r\n                React.createElement(\r\n                    'div',\r\n                    { style: styles.widgetContainer },\r\n                    React.createElement(\r\n                        'div',\r\n                        null,\r\n                        this.props.children\r\n                    )\r\n                )\r\n            );\r\n\r\n            // <button style={style.arcticButton} onClick={this.fireclick.bind(this)} title={this.props.title} >\r\n            //     <span style={{ height: \"15px\", width: \"15px\" }} aria-hidden className={esriClassName} ></span>\r\n            // </button>\r\n\r\n            ReactDOM.render(ele, this.renderEle);\r\n        } else {\r\n            var eleempty = React.createElement('span', null);\r\n            ReactDOM.render(eleempty, this.renderEle);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapPanel","import React from 'react';\r\nimport async from 'async';\r\nimport './ArcticMap.css';\r\n\r\n//import { Map, loadModules } from 'react-arcgis'\r\n// Use @arcgis/core or esri-loader directly in your React application\r\nimport { setDefaultOptions } from 'esri-loader';\r\n\r\n// configure esri-loader to use version 4.25\r\n// and the CSS for that version from the ArcGIS CDN\r\nsetDefaultOptions({ version: '4.25', css: true, insertCssBefore: 'style' });\r\n\r\nimport ArcticMapButton from './ArcticMapButton';\r\nimport ArcticMapLoader from './ArcticMapLoader';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\n\r\nvar style = document.createElement('style');\r\nstyle.id = \"esri-overrides\"\r\nstyle.innerHTML =\r\n  '.esri-ui-bottom-right {' +\r\n  'flex-flow: column;' +\r\n  '}' +\r\n  '.esri-ui-bottom-right .esri-component {' +\r\n  'margin-top: 10px;' +\r\n  '}' +\r\n  '.esri-layer-list { background-color: transparent; padding: 1px; }' +\r\n  '.esri-layer-list__item--has-children .esri-layer-list__item { box-shadow: none; }' +\r\n  '.esri-layer-list__item--has-children { border-bottom: none; box-shadow: 0px 0px 3px 0px black; border-radius: 4px; margin-bottom: 10px;  }' +\r\n  '.esri-basemap-gallery { position: absolute; bottom: 0; right: 0; }'\r\n  ;\r\ndocument.head.appendChild(style);\r\n\r\n\r\nclass ArcticMap extends React.Component {\r\n  static displayName = 'ArcticMap';\r\n  \r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      map: null,\r\n      view: null,\r\n      hideBasemapButton: false,\r\n      loading: false,\r\n      lat: props.lat,\r\n      lng: props.lng,\r\n      mode: props.mode || \"view\",\r\n      basemap: props.basemap || \"hybrid\",\r\n      sr: Number.parseInt(props.sr || \"102100\"),\r\n    }\r\n\r\n    this.handleMapLoad = this.handleMapLoad.bind(this)\r\n    this.handleMapClick = this.handleMapClick.bind(this)\r\n    this.layers = []\r\n  }\r\n\r\n\r\n\r\n\r\n  render() {\r\n    var self = this\r\n    var index = 0\r\n    this.layers = []\r\n    self.childrenElements = [];\r\n\r\n    var children = React.Children.map(this.props.children, function (child) {\r\n      if(child){\r\n        if (child.type.displayName === 'ArcticMapLayer') {\r\n          return React.cloneElement(child, {\r\n            ref: (c) => { if (c) { self.layers.push(c) } }\r\n          })\r\n        } else if (child.type.displayName === 'ArcticMapEdit') {\r\n          // console.log(self.refs);\r\n          return React.cloneElement(child, {\r\n            am: self,\r\n            // ref: 'editor'\r\n\r\n          })\r\n\r\n        }\r\n\r\n        // else if (child.type.name === 'ArcticMapLLDSearch') {\r\n\r\n        //   return React.cloneElement(child, {\r\n        //   })\r\n\r\n        // } \r\n\r\n        else {\r\n          return React.cloneElement(child, {\r\n            am: self,\r\n\r\n            map: self.state.map,\r\n            view: self.state.view,\r\n            //ref: 'child-' + (index++)\r\n            ref: (c) => { if (c) { self.childrenElements.push(c); } return 'child-' + (index++) }\r\n          })\r\n        }\r\n    }\r\n    })\r\n\r\n    if (children) {\r\n      children = children.sort(l => l.type.displayName === 'ArcticMapEdit').reverse()\r\n\r\n    } else {\r\n      children = (<div />)\r\n    }\r\n\r\n\r\n\r\n\r\n    // console.log(this.props.children);\r\n    // this.props.children.forEach((child) =>{\r\n    //         child.ref = (c) => {this.layers.push(c) };\r\n    // });\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n      <Map class='full-screen-map'\r\n        mapProperties={{ basemap: this.state.basemap }} onLoad={this.handleMapLoad} onClick={this.handleMapClick} >\r\n        {children}\r\n\r\n        {/* <div id='bottombar' style={{ position: 'absolute', right: '10px', bottom: '20px' }}> */}\r\n\r\n        {/* </div> */}\r\n\r\n\r\n\r\n\r\n        <ArcticMapLoader loading={this.state.loading} />\r\n\r\n\r\n\r\n        {/*  <div id='bottomleftbar'>\r\n        {this.state.loading === true &&\r\n         <p>Loading...</p>\r\n        }\r\n      </div>\r\n      */}\r\n      </Map>\r\n\r\n    );\r\n  }\r\n\r\n  handleShowBasemaps(event) {\r\n    this.state.view.ui.add(this.basemapGallery, {\r\n      position: 'bottom-right'\r\n    })\r\n\r\n    this.setState({ hideBasemapButton: true })\r\n  }\r\n\r\n  handleMapClick(event) {\r\n    // console.log(event);\r\n  }\r\n\r\n  createElementFromHTML(htmlString) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = htmlString.trim();\r\n\r\n    // Change this to div.childNodes to support multiple top-level nodes\r\n    return div.firstChild;\r\n  }\r\n\r\n\r\n  setEdit(json, nofire, type) {\r\n    if (nofire === null) {\r\n      nofire = false;\r\n    }\r\n\r\n    if (type === null) {\r\n      type = \"polygon\";\r\n    }\r\n\r\n\r\n\r\n    if (this.state.map.editor) {\r\n      this.state.map.editor.setEditFeature(json, nofire, type);\r\n    }\r\n  }\r\n\r\n  setMode(val) {\r\n    this.setState({ mode: val });\r\n    if (val === \"identify\") {\r\n      this.state.view.cursor = \"help\";\r\n    }\r\n    if (val === \"view\") {\r\n      this.state.view.cursor = \"grab\";\r\n    }\r\n    if (val === \"select\") {\r\n      this.state.view.cursor = \"auto\";\r\n    }\r\n    if (val === \"edit\") {\r\n      this.state.view.cursor = \"crosshairs\";\r\n    }\r\n  }\r\n\r\n  setJson(json) {\r\n    if (this.state.map.editor) {\r\n      this.state.map.editor.setEditFeature(json, true);\r\n    }\r\n  }\r\n\r\n  drawTempGraphic( view, event) {\r\n    view.graphics.removeAll();\r\n    //w.toMap({ x: event.x, y: event.y });\r\n    const pt1=view.toMap({x:event.origin.x, y:event.origin.y});\r\n    const pt2=view.toMap({x:event.x, y:event.y})\r\n    const rings= [\r\n      [pt1.x, pt1.y],\r\n      [pt1.x, pt2.y],      \r\n      [pt2.x, pt2.y],\r\n      [pt2.x, pt1.y]\r\n    ]\r\n    loadModules([\r\n      'esri/geometry/Polygon',\r\n      'esri/Graphic'\r\n\r\n    ]).then(([\r\n      Polygon,\r\n      Graphic\r\n\r\n    ]) => {\r\n      const tempPolygon = new Polygon({\r\n        hasz: false,\r\n        hasm: false,\r\n        rings: rings,\r\n        spatialReference: view.spatialReference\r\n      })\r\n      const tempSymbol = {\r\n        type: \"simple-line\",  // autocasts as new SimpleLineSymbol()\r\n        color: [128,128,128],\r\n        width: \"5px\",\r\n        style: \"solid\"\r\n      };\r\n      const tempPolygonGraphic = new Graphic ({\r\n        geometry: tempPolygon,\r\n        symbol: tempSymbol\r\n      })\r\n      view.graphics.add(tempPolygonGraphic);\r\n\r\n      if(event.action===\"end\"){\r\n        view.graphics.removeAll();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  handleMapLoad(map, view) {\r\n\r\n\r\n    this.setState({ map, view })\r\n\r\n    var self = this\r\n    self.state.map.amlayers = [];\r\n    var centerSplit = this.props.center.split('|');\r\n    view.center = [parseFloat(centerSplit[1]), parseFloat(centerSplit[0])];\r\n    view.zoom = parseInt(centerSplit[2]);\r\n    self.cntrlIsPressed = false;\r\n\r\n    loadModules([\r\n\r\n      'esri/widgets/Locate',\r\n      'esri/widgets/BasemapGallery',\r\n      'esri/widgets/Home',\r\n\r\n      'esri/widgets/Search',\r\n      'esri/layers/FeatureLayer',\r\n      // 'esri/tasks/Locator',\r\n      'esri/rest/locator',\r\n      'esri/geometry/geometryEngine',\r\n      //'esri/tasks/support/IdentifyParameters',\r\n      'esri/rest/support/IdentifyParameters',\r\n      'esri/request',\r\n      'esri/geometry/Polygon',\r\n\r\n    ]).then(([\r\n\r\n      Locate,\r\n      BasemapGallery,\r\n      Home,\r\n\r\n      Search,\r\n      FeatureLayer,\r\n      Locator,\r\n      geometryEngine,\r\n      IdentifyParameters,\r\n      Request,\r\n      Polygon,\r\n\r\n    ]) => {\r\n      window._request = Request;\r\n      window._map = self;\r\n      self.request = Request;\r\n\r\n\r\n\r\n\r\n\r\n      if (self.state.mode === \"identify\") {\r\n        self.state.view.cursor = \"help\";\r\n      }\r\n      if (self.state.mode === \"view\") {\r\n        self.state.view.cursor = \"grab\";\r\n      }\r\n      if (self.state.mode === \"edit\") {\r\n        self.state.view.cursor = \"crosshairs\";\r\n      }\r\n\r\n      if (self.state.mode === \"select\") {\r\n        self.state.view.cursor = \"auto\";\r\n      }\r\n\r\n\r\n      //   self.state.view.spatialReference = {\r\n      //     wkid: self.state.sr,\r\n      //  };\r\n\r\n      // var layerList = new LayerList({\r\n      //   view: self.state.view,\r\n      //   listItemCreatedFunction: function (event) {\r\n      //     const item = event.item\r\n      //     item.panel = {\r\n      //       content: 'legend',\r\n      //       open: false\r\n      //     }\r\n      //   }\r\n      // })\r\n\r\n\r\n\r\n      view.popup.dockEnabled = true\r\n      view.popup.dockOptions.position = 'bottom-left'\r\n      //var layers = React.Children.toArray(this.props.children).filter((ele) => ele.type.name === \"ArcticMapLayer\");\r\n\r\n\r\n\r\n      // console.log(layers);\r\n      view.popup.watch(\"visible\", function (visible) {\r\n        \r\n        if (!visible) {\r\n          view.graphics.removeAll();\r\n        }\r\n\r\n      })\r\n\r\n      view.popup.watch('selectedFeature', function (graphic) {\r\n        view.graphics.removeAll();\r\n        if (graphic) {\r\n          var graphicTemplate = graphic.getEffectivePopupTemplate();\r\n          if(graphic.geometry){\r\n            graphicTemplate.actions = [{\r\n              id: 'select-item',\r\n              title: 'Select',\r\n              image: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTQyREM3RDkwQzVGMTFFNTk4QkI4OTBEOTYzQTg5MzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTQyREM3REEwQzVGMTFFNTk4QkI4OTBEOTYzQTg5MzEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NDJEQzdENzBDNUYxMUU1OThCQjg5MEQ5NjNBODkzMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NDJEQzdEODBDNUYxMUU1OThCQjg5MEQ5NjNBODkzMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prb3PqgAAACTSURBVHjaYvz//z8DJYCJgVJAjgsiIyMFQBjEZgQZwMjISJJmILUXynVmIdVmqGZ9qFAe0S7AonnR8uXLk5jItBmsGSUWgIriSdUMNwCoaB6QmgulidaM7AKYgjiYIcRohkdjVFQUhmIoG69mlHSAxUYGQppRAhGo6AMoYQDxRWI1Y02JSC65SEgz3IABzY0AAQYAhIhWWCl3Pj0AAAAASUVORK5CYII=\",\r\n            }]\r\n            graphicTemplate.actions.items[0].visible = self.state.map.editor !== undefined// graphic.attributes.website ? true : false;\r\n\r\n          }else{\r\n            graphicTemplate.actions = [];\r\n          }\r\n          loadModules(['esri/symbols/SimpleFillSymbol'])\r\n                .then(([SimpleFillSymbol]) => {\r\n                    var symbol = new SimpleFillSymbol({\r\n                        color: [135, 206, 235, 0.5],\r\n                        style: \"solid\",\r\n                        outline: {\r\n                            color: [0, 191, 255],\r\n                            width: 1\r\n                        }\r\n                    });\r\n                    if (graphic) {\r\n                        graphic.symbol = symbol;\r\n                        var popupGraphic = graphic\r\n                        view.graphics.add(popupGraphic);\r\n                    } else {\r\n                      view.graphics.removeAll();\r\n                      view.popup.content.graphic = null;\r\n                    }                    \r\n                })\r\n          //self.state.view.goTo(graphic);\r\n        }\r\n      })\r\n      view.popup.viewModel.on('trigger-action', function (event) {\r\n        //var target = event.target || window.event.target || window.event.srcElement;\r\n        if (event.action.id === 'select-item') {\r\n          self.state.map.editor.setEditFeature(view.popup.selectedFeature, null, null, false, true);\r\n          view.popup.close();\r\n        }\r\n      })\r\n\r\n      window.addEventListener(\"keydown\",function (event) {\r\n        if (event.which == \"17\") self.cntrlIsPressed = true;\r\n      });\r\n\r\n      window.addEventListener(\"contextmenu\", function(event){\r\n        self.contextmenuPressed = true;\r\n      });\r\n\r\n      window.addEventListener(\"keyup\",function (event) {\r\n        self.cntrlIsPressed = false;\r\n      });\r\n\r\n      view.on('drag', (event) => {\r\n\r\n        console.log(\"drag\",self);\r\n        \r\n        if(self.state.mode===\"review\"){\r\n          self.drawTempGraphic( self.state.view, event);\r\n          event.stopPropagation();\r\n          var vw = self.state.view;\r\n          var pt = vw.toMap({ x: event.x, y: event.y });\r\n          var idParams = new IdentifyParameters();\r\n          if(event.action===\"start\"){\r\n            self.dragStart = pt;\r\n          }\r\n          if (event.action == \"end\"){\r\n            const rings= [\r\n              [pt.x, pt.y],\r\n              [pt.x, self.dragStart.y],      \r\n              [self.dragStart.x, self.dragStart.y],\r\n              [self.dragStart.x, pt.y]\r\n            ]\r\n            const tempPolygon = new Polygon({\r\n              hasz: false,\r\n              hasm: false,\r\n              rings: rings,\r\n              spatialReference: self.state.view.spatialReference\r\n            })\r\n            //console.log(\"check self\", self);\r\n            idParams.geometry=tempPolygon;\r\n            idParams.tolerance = 3;\r\n            //vw.goTo([pt,self.dragStart]);\r\n            self.layers.filter( function(layer){\r\n              //console.log(\"layers\", layer);\r\n              layer.params.width = self.state.view.width;\r\n              layer.params.height = self.state.view.height;\r\n              layer.params.mapExtent = self.state.view.extent;\r\n              layer.params.geometry=tempPolygon;\r\n              layer.identifyTask.execute(layer.params).then(function(response){\r\n                //console.log(\"identifyTask \",response );\r\n                \r\n              })\r\n              \r\n            })\r\n          }\r\n\r\n          // self.layer.identifyArea(self.dragStart, pt, self.layer.props.allowMultiSelect, function (results) {\r\n          //   console.log(\"identifyArea\", results);\r\n          //   if (results) {\r\n          //     results.layer = self.layer;\r\n          //     identresults.push(results);\r\n          //   }\r\n\r\n          // });\r\n        }\r\n        if(self.state.mode===\"select\")\r\n        {\r\n\r\n          self.drawTempGraphic( self.state.view, event);\r\n          event.stopPropagation();\r\n          var vw = self.state.view;\r\n          var pt = vw.toMap({ x: event.x, y: event.y });\r\n\r\n          if(event.action===\"start\"){\r\n            self.dragStart = pt;\r\n          }\r\n          else if(event.action===\"end\"){\r\n            if (event.button == 0 ) {\r\n              self.contextmenuPressed = false;\r\n            }\r\n            if (self.state.map.editor && self.state.map.editor.state.editing === true) {\r\n                return;\r\n            }\r\n        \r\n            var identresults = [];\r\n            self.setState({ loading: true });\r\n        \r\n            var identLayers = self.layers.filter(function (layer) {\r\n              //TODO check if this is selectable\r\n              if (layer.props.allowMultiSelect === undefined) {\r\n                  return;\r\n              }\r\n        \r\n                var mapzoom = view.zoom;\r\n        \r\n              if (layer.props.identMaxZoom !== undefined) {\r\n                if (Number.parseInt(layer.props.identMaxZoom, 10) > mapzoom) {\r\n                  return layer;\r\n                }\r\n                else {\r\n                  return;\r\n                }\r\n              }\r\n        \r\n              return layer;\r\n        \r\n            });\r\n        \r\n            identLayers = identLayers.concat(self.state.map.amlayers);\r\n            //console.log(\"amlayers\");\r\n            //console.log(self.state.map.amlayers);\r\n        \r\n            async.eachSeries(identLayers, function (layer, cb) {\r\n              if(!layer.state.disablePopup){   \r\n                //TODO\r\n                layer.identifyArea(self.dragStart, pt, layer.props.allowMultiSelect, function (results) {\r\n                  if (results) {\r\n                    results.layer = layer;\r\n                    identresults.push(results);\r\n                  }\r\n                  cb();\r\n                });\r\n              }\r\n            }, function (err) {\r\n              var results = identresults.map(function (ir) {\r\n                ir.results.forEach(function (res) {\r\n                  res.layer = ir.layer;\r\n                });\r\n                return ir.results;\r\n              }) || [].reduce(function (a, b) {\r\n                return a.concat(b);\r\n              });\r\n        \r\n              self.setState({ loading: false });\r\n        \r\n              results = results.flat();\r\n        \r\n                var feature = null;\r\n                for (var idx = 0; idx<results.length; idx++){\r\n                    feature = results[idx].feature;\r\n        \r\n                    self.state.map.editor.setEditFeature(feature, null, null, false, true, self.contextmenuPressed);            \r\n                }\r\n            });\r\n          }\r\n        }\r\n        else if(event.button != 0){\r\n          self.drawTempGraphic( self.state.view, event);\r\n          event.stopPropagation();\r\n          var vw = self.state.view;\r\n          var pt = vw.toMap({ x: event.x, y: event.y });\r\n          //console.log(\"self.\", self);\r\n          //console.log(\"self.dragStart\", self.dragStart);\r\n          if(event.action===\"start\"){\r\n            self.dragStart = pt;\r\n          }\r\n          else if(event.action===\"end\"){\r\n            vw.goTo([pt,self.dragStart]);\r\n          }\r\n\r\n        }\r\n      });\r\n\r\n      view.on('click', (event) => {\r\n        if (event.button == 0 ) {\r\n          self.contextmenuPressed = false;\r\n        }\r\n        \r\n        //console.log(event);\r\n\r\n        //hide stuff\r\n\r\n\r\n        if (self.state.hideBasemapButton && self.state.hideBasemapButton === true) {\r\n          self.state.view.ui.remove(self.basemapGallery);\r\n          self.setState({ hideBasemapButton: false });\r\n          return;\r\n        }\r\n\r\n\r\n        if (self.state.mode === \"view\") { return; }\r\n        \r\n        if (event.button == 0 ) {\r\n          if (self.state.map.editor && self.state.map.editor.state.editing === true) {\r\n            return;\r\n          }\r\n        }\r\n        \r\n\r\n        var currentmode = self.state.mode;\r\n        if (currentmode !== 'select') {\r\n          self.setMode(\"view\");\r\n        }\r\n\r\n\r\n\r\n        // console.log(event);\r\n        // need to work on identify and add to a single popup\r\n        // https://developers.arcgis.com/javascript/latest/sample-code/sandbox/index.html?sample=tasks-identify\r\n\r\n        var identresults = [];\r\n        //document.getElementsByClassName('esri-view-root')[0].style.cursor = 'wait';\r\n        self.setState({ loading: true });\r\n\r\n        var identLayers = self.layers.filter(function (layer) {\r\n          var mapzoom = view.zoom;\r\n\r\n          if (layer.props.identMaxZoom !== undefined) {\r\n            if (Number.parseInt(layer.props.identMaxZoom, 10) > mapzoom) {\r\n              return layer;\r\n            }\r\n            else {\r\n              return;\r\n            }\r\n          }\r\n\r\n          return layer;\r\n\r\n        });\r\n\r\n        identLayers = identLayers.concat(self.state.map.amlayers);\r\n        \r\n        //console.log(\"IdentLayers: \",identLayers);\r\n        //console.log(this.state.map.allLayers.items);\r\n/*        this.state.map.allLayers.items.forEach((item) => {\r\n          //console.log(item.title+\" - \"+item.type);\r\n          if (item.visible === true && item.sublayers !== undefined && (item.type===\"map-image\" || item.type === \"feature\" || item.type === \"graphics\") ) {\r\n            //console.log(item.title);\r\n            item.sublayers.items.forEach((subItems) => {\r\n              if (subItems.visible === true) {\r\n                console.log(subItems.url);\r\n              }\r\n            })\r\n            //console.log(item.url);\r\n          }\r\n\r\n        });\r\n*/\r\n        async.eachSeries(identLayers, function (layer, cb) {\r\n          if(layer.layerRef.visible === false || layer.layerRef.sublayers === undefined && layer.props.type !== \"geojson\" && layer.props.type !== \"group\" && layer.props.type !== \"feature\" && layer.props.type !== \"groupby\")\r\n          {\r\n            cb();   \r\n            return;\r\n          }\r\n          if((!layer.state.disablePopup && layer.layerRef.visible === true && (layer.layerRef.sublayers !== undefined || layer.props.type === \"feature\")) || layer.props.type === \"geojson\" || layer.props.type === \"group\" || layer.props.type === \"groupby\"){\r\n            const visibleLayers = [];\r\n            let noFilter = false; \r\n            if(layer.props.sublayers){\r\n              layer.props.sublayers.forEach(s => {\r\n                if(s.nofilter === true){\r\n                  noFilter = s.nofilter;\r\n                }\r\n              });\r\n            }\r\n\r\n            const isLayerVisible = (lyr) => {\r\n              let isVisible = lyr.visible;\r\n              if (lyr.visible && lyr.parent && lyr.parent.title && lyr.parent.url) {\r\n                isVisible = isLayerVisible(lyr.parent);\r\n              }\r\n              return isVisible;\r\n            }\r\n\r\n            if (layer.layerRef.sublayers) {\r\n              layer.layerRef.allSublayers.forEach((sub) => {\r\n                if (!sub.sublayers && isLayerVisible(sub) && noFilter === false) {\r\n                  visibleLayers.push(sub.url);\r\n                }\r\n              });\r\n            }\r\n             if (layer.props.type === \"groupby\"){\r\n              var subLayers = [];\r\n              subLayers = layer.layerRef.layers.items;\r\n              subLayers.forEach((sub) => {\r\n                if (sub.sublayers){\r\n                  sub.sublayers.items.forEach((subSub) => {\r\n                    if (subSub.visible === true){\r\n                      visibleLayers.push(subSub.url);\r\n                    }\r\n                  });\r\n                }\r\n              })\r\n            }\r\n            \r\n            layer.identify(event, function (resultslist) {\r\n              resultslist.forEach(results => {\r\n\r\n                if (results) {\r\n                  if(visibleLayers.length > 0){\r\n                    var rem = [];\r\n                    results.results.forEach(res =>{\r\n                      if(visibleLayers.length > 0 && !visibleLayers.includes(`${results.layer.layerRef.url}/${res.layerId}`))\r\n                      {\r\n                        rem.push(res.layerId);\r\n                      }\r\n                    });\r\n                    rem.forEach(remid =>{\r\n                      results.results.splice(results.results.findIndex(r => r.layerId === remid), 1);\r\n                    });                      \r\n                  }\r\n\r\n                  if(results.results.length > 0)\r\n                  {\r\n                    identresults.push(results);\r\n                  }\r\n                }\r\n              });\r\n              cb();\r\n            });\r\n          } \r\n        }, function (err) { \r\n          var results = [];\r\n          results = identresults.map(function (ir) {\r\n            ir.results.forEach(function (res) {\r\n              res.layer = ir.layer;\r\n              res.acres = -1;\r\n              if (res.feature.geometry) {\r\n                res.acres = geometryEngine.geodesicArea(res.feature.geometry, 'acres');\r\n              }\r\n           });\r\n           return ir.results;\r\n          }) || [].reduce(function (a, b) {\r\n            return a.concat(b);\r\n          });\r\n          self.setState({ loading: false });\r\n          results = results.flat();\r\n\r\n          results = results.sort(function (r1, r2) {\r\n            if(r1.acres < 0 && r2.acres < 0) return 0;\r\n            if(r1.acres < 0) return 1;\r\n            if(r2.acres < 0) return -1;\r\n            if (r1.acres > r2.acres) {\r\n              return 1;\r\n            }\r\n            if (r2.acres > r1.acres) {\r\n              return -1;\r\n            }\r\n            return 0;\r\n            //r.feature.attributes.Shape_Area\r\n          });\r\n\r\n          if (currentmode === \"identify\") {\r\n\r\n            //results = results.reverse();\r\n            var popupresults = results.map(function (result) {\r\n              var feature = result.feature;\r\n              var layerName = result.layerName;\r\n\r\n              if(feature.attributes !== null){\r\n                feature.attributes.layerName = layerName;\r\n              }\r\n              \r\n              if (result.layer.layerRef && result.layer.layerRef.allSublayers && result.layer.layerRef.allSublayers.length > 0) {\r\n                const sublayer = result.layer.layerRef.allSublayers.find(l => l.id === result.layerId);\r\n                if (sublayer) {\r\n                  feature.attributes.layerUrl = sublayer.url;\r\n                }\r\n              }\r\n\r\n              if(result.layer.layerRenderers){\r\n                //console.log(\"result.layer  this.layerRenderers\", result);\r\n                var popupDisable = result.layer.layerRenderers.find(l => l.props.layerid === result.layerId.toString());\r\n                //console.log(\"result.layer  popupDisable\", popupDisable.props);\r\n                if (popupDisable  && result.layerId == popupDisable.props.layerid) {\r\n                  //console.log(\"result.layer  popupDisable\", popupDisable.props);\r\n                  if (popupDisable.props.disabled == \"true\") {\r\n                    return null;\r\n                  }\r\n                }\r\n              }\r\n\r\n              var PTActions = [];\r\n              if(!result.layer.state.blockSelect)\r\n              {\r\n                PTActions = [];\r\n              } else {\r\n                PTActions = [{ title: \"Select\", id: \"select-action\" }];\r\n              }\r\n\r\n              feature.popupTemplate = { // autocasts as new PopupTemplate()\r\n                //title: layerName,\r\n                title: result.layer.renderPopupTitle(feature, result),\r\n                content: result.layer.renderPopup(feature, result),\r\n                actions: PTActions\r\n              };\r\n\r\n              return feature;\r\n            });\r\n\r\n            // remove the disabled popup layer\r\n            for(var i=popupresults.length-1;i>=0;i--){\r\n              if(popupresults[i]==null){\r\n                popupresults.splice(i, 1);\r\n              }\r\n            }\r\n            //popupresults.forEach( function (result) {\r\n            //  if (result == null) {\r\n            //    popupresults.pop();\r\n            //  } \r\n            //});\r\n\r\n            if (popupresults.length > 0) {\r\n              view.popup.close();\r\n              view.popup.currentSearchResultFeature = null;\r\n              self.state.view.popup.open({\r\n                features: popupresults,\r\n                location: event.mapPoint\r\n              });\r\n              // popupresults[0].setCurrentPopup();\r\n\r\n              self.state.view.popup.on('trigger-action', function (e) {\r\n                if (e.action.id === 'select-action');\r\n              });\r\n            }\r\n            self.setState({ loading: false });\r\n          } //current mode identify\r\n\r\n          if (currentmode === \"select\") {\r\n            var feature = null;\r\n            var fType = null;\r\n            for (var idx = 0; idx<results.length && feature===null; idx++){\r\n              feature = results[idx].feature;\r\n              fType = feature.geometry.type;\r\n            }\r\n\r\n            if (self.contextmenuPressed === true) {\r\n\r\n              self.state.map.editor.setEditFeature(feature, null, fType, false, true, true);\r\n            }\r\n            else {\r\n\r\n              self.state.map.editor.setEditFeature(feature, null, fType, false, true);\r\n            }\r\n          } //current mode select\r\n\r\n\r\n          //document.getElementsByClassName('esri-view-root')[0].style.cursor = 'auto';\r\n          /**/\r\n        }); //function(err)\r\n\r\n        // self.layers.forEach(layer => {\r\n        //     layer.identify(event);\r\n        // })\r\n        //}, 100);\r\n\r\n      }) //view.onClick\r\n\r\n      // Add widget to the top right corner of the view\r\n      // self.state.view.ui.add(layerList, 'top-left')\r\n\r\n\r\n      if (this.props.locate) {\r\n        var locateBtn = new Locate({\r\n          view: self.state.view\r\n        })\r\n\r\n        self.state.view.ui.add(locateBtn, {\r\n          position: 'top-right'\r\n        })\r\n      }\r\n\r\n      this.basemapGallery = new BasemapGallery({\r\n        view: self.state.view\r\n      })\r\n\r\n      this.basemapGallery.watch('activeBasemap', function (newValue, oldValue, property, object) {\r\n        self.state.view.ui.remove(self.basemapGallery)\r\n        self.setState({ hideBasemapButton: false })\r\n      });\r\n\r\n\r\n      map.on(\"basemap-change\", function (a) {\r\n        //this.basemapGallery.on('click', function () {\r\n\r\n        alert(\"BM CHanegd\")\r\n      })\r\n\r\n\r\n      // Add the widget to the top-right corner of the view\r\n      if (this.props.home) {\r\n        var homeBtn = new Home({\r\n          view: view\r\n        })\r\n\r\n        // Add the home button to the top left corner of the view\r\n        view.ui.add(homeBtn, 'top-right')\r\n      }\r\n\r\n      view.ui.remove('zoom')\r\n\r\n      this.getEditFeature = () => {\r\n        this.state.map.editor.state.tempGraphicsLayer.graphics.items[0];\r\n      }\r\n\r\n      setTimeout(() => {\r\n        var evt = new Event('mapready', { bubbles: true });\r\n        Object.defineProperty(evt, 'target', { value: self, enumerable: true });\r\n\r\n        if (self.props.onmapready) {\r\n          self.props.onmapready(evt);\r\n        }\r\n      }, 500)\r\n    })\r\n  }\r\n\r\n  identPostProcess (identresults) { \r\n    var results = [];\r\n    results = identresults.map(function (ir) {\r\n      ir.results.forEach(function (res) {\r\n        res.layer = ir.layer;\r\n        res.acres = -1;\r\n        if (res.feature.geometry) {\r\n          res.acres = geometryEngine.geodesicArea(res.feature.geometry, 'acres');\r\n        }\r\n     });\r\n     //results.push(ir.results); \r\n     return ir.results;\r\n    }) || [].reduce(function (a, b) {\r\n      return a.concat(b);\r\n    });\r\n    self.setState({ loading: false });\r\n    results = results.flat();\r\n\r\n    results = results.sort(function (r1, r2) {\r\n      if(r1.acres < 0 && r2.acres < 0) return 0;\r\n      if(r1.acres < 0) return 1;\r\n      if(r2.acres < 0) return -1;\r\n      if (r1.acres > r2.acres) {\r\n        return 1;\r\n      }\r\n      if (r2.acres > r1.acres) {\r\n        return -1;\r\n      }\r\n      return 0;\r\n      //r.feature.attributes.Shape_Area\r\n    });\r\n\r\n    if (currentmode === \"identify\") {\r\n\r\n      //results = results.reverse();\r\n      var popupresults = results.map(function (result) {\r\n        var feature = result.feature;\r\n        var layerName = result.layerName;\r\n\r\n        if(feature.attributes !== null){\r\n          feature.attributes.layerName = layerName;\r\n        }\r\n        \r\n        console.log(\"result\", result);\r\n\r\n        if (result.layer.layerRef && result.layer.layerRef.allSublayers && result.layer.layerRef.allSublayers.length > 0) {\r\n          const sublayer = result.layer.layerRef.allSublayers.find(l => l.id === result.layerId);\r\n          if (sublayer) {\r\n            feature.attributes.layerUrl = sublayer.url;\r\n          }\r\n        }\r\n\r\n        if(result.layer.layerRenderers){\r\n          //console.log(\"result.layer  this.layerRenderers\", result);\r\n          var popupDisable = result.layer.layerRenderers.find(l => l.props.layerid === result.layerId.toString());\r\n          //console.log(\"result.layer  popupDisable\", popupDisable.props);\r\n          if (popupDisable  && result.layerId == popupDisable.props.layerid) {\r\n            //console.log(\"result.layer  popupDisable\", popupDisable.props);\r\n            if (popupDisable.props.disabled == \"true\") {\r\n              return null;\r\n            }\r\n          }\r\n        }\r\n\r\n        var PTActions = [];\r\n        if(!result.layer.state.blockSelect)\r\n        {\r\n          PTActions = [];\r\n        } else {\r\n          PTActions = [{ title: \"Select\", id: \"select-action\" }];\r\n        }\r\n\r\n        feature.popupTemplate = { // autocasts as new PopupTemplate()\r\n          //title: layerName,\r\n          title: result.layer.renderPopupTitle(feature, result),\r\n          content: result.layer.renderPopup(feature, result),\r\n          actions: PTActions\r\n        };\r\n\r\n        return feature;\r\n      });\r\n\r\n      // remove the disabled popup layer\r\n      for(var i=popupresults.length-1;i>=0;i--){\r\n        if(popupresults[i]==null){\r\n          popupresults.splice(i, 1);\r\n        }\r\n      }\r\n      //popupresults.forEach( function (result) {\r\n      //  if (result == null) {\r\n      //    popupresults.pop();\r\n      //  } \r\n      //});\r\n\r\n      if (popupresults.length > 0) {\r\n        view.popup.close();\r\n        view.popup.currentSearchResultFeature = null;\r\n        self.state.view.popup.open({\r\n          features: popupresults,\r\n          location: event.mapPoint\r\n        });\r\n        // popupresults[0].setCurrentPopup();\r\n\r\n        self.state.view.popup.on('trigger-action', function (e) {\r\n          if (e.action.id === 'select-action');\r\n        });\r\n      }\r\n      self.setState({ loading: false });\r\n    } //current mode identify\r\n\r\n    if (currentmode === \"select\") {\r\n      var feature = null;\r\n      var fType = null;\r\n      for (var idx = 0; idx<results.length && feature===null; idx++){\r\n        feature = results[idx].feature;\r\n        fType = feature.geometry.type;\r\n      }\r\n\r\n      if (self.contextmenuPressed === true) {\r\n\r\n        self.state.map.editor.setEditFeature(feature, null, fType, false, true, true);\r\n      }\r\n      else {\r\n\r\n        self.state.map.editor.setEditFeature(feature, null, fType, false, true);\r\n      }\r\n    } //current mode select\r\n\r\n\r\n    //document.getElementsByClassName('esri-view-root')[0].style.cursor = 'auto';\r\n  }\r\n}\r\n\r\nexport default ArcticMap\r\n","import React, { Component } from \"react\";\r\nimport ReactDOM from 'react-dom'\r\nimport { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\n\r\n//import {\r\n//    loadModules\r\n//} from 'react-arcgis';\r\n// Use @arcgis/core or esri-loader directly in your React application\r\nimport { setDefaultOptions } from 'esri-loader';\r\n\r\n// configure esri-loader to use version 4.25\r\n// and the CSS for that version from the ArcGIS CDN\r\nsetDefaultOptions({ version: '4.25', css: true, insertCssBefore: 'style' });\r\n\r\nclass ArcticMapLayer extends React.Component {\r\n    static displayName = \"ArcticMapLayer\";\r\n    constructor(props) {\r\n        super(props);\r\n//        console.log(props)\r\n\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null,\r\n            title: props.title,\r\n            blockSelect: props.blockIdentSelect !== undefined,\r\n            disablePopup: props.disablePopup !== undefined\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.view.graphics.remove(this.state.graphic);\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n//        console.log(\"ComponentDidMount: \"+this.props.title);\r\n        loadModules(['esri/Graphic',\r\n            \"esri/layers/FeatureLayer\",\r\n            \"esri/layers/MapImageLayer\",\r\n            \"esri/layers/ImageryLayer\",\r\n\r\n            \"esri/layers/GraphicsLayer\",\r\n            \"esri/rest/identify\",\r\n            //\"esri/tasks/IdentifyTask\",\r\n            //\"esri/tasks/support/IdentifyParameters\",\r\n            \"esri/rest/support/IdentifyParameters\",\r\n            \"esri/geometry/Point\",\r\n            \"esri/symbols/SimpleMarkerSymbol\",\r\n            \"esri/layers/GroupLayer\",\r\n            \"esri/renderers/Renderer\"\r\n        ]).then(([\r\n            Graphic,\r\n            FeatureLayer,\r\n            MapImageLayer,\r\n            ImageryLayer,\r\n\r\n            GraphicsLayer,\r\n            identify,\r\n            IdentifyParameters,\r\n            Point,\r\n            SimpleMarkerSymbol,\r\n            GroupLayer,\r\n            Renderer\r\n        ]) => {\r\n            // Create a polygon geometry\r\n\r\n            var children2 = [];\r\n            var children = React.Children.map(this.props.children, function (child) {\r\n                   if (child.type.displayName === 'ArcticMapLayerPopup') {\r\n                       return child;\r\n                       // return React.cloneElement(child, {\r\n                       //     // ref: 'editor'\r\n                       //   })\r\n                   }\r\n                   else if (child.type.displayName === 'ArcticMapLayer') {\r\n                        var subchildren = [];\r\n                        //console.log(child.props.children);\r\n                        child.props.children.forEach(function (subchild) {\r\n                           if (subchild.type.displayName === 'ArcticMapLayerPopup') {\r\n                              //console.log(subchild);\r\n                              subchildren.push(subchild);\r\n                           }\r\n                       })\r\n                       children2 = subchildren;  \r\n                   }\r\n               })\r\n               if (children2.length > 0 ){\r\n                   self.layerRenderers = children2;\r\n               }\r\n               else {\r\n                   self.layerRenderers = children;\r\n               }\r\n               //console.log(self.layerRenderers);\r\n   \r\n            var childrenEles = [];\r\n            if (self.props.children) {\r\n                if (Array.isArray(self.props.children)) {\r\n                    childrenEles = self.props.children;\r\n                }\r\n                else {\r\n                    childrenEles.push(self.props.children);\r\n                }\r\n            }\r\n\r\n            var renderers = childrenEles.filter(child => {\r\n                if (child.type.displayName === 'ArcticMapLayerRenderer') {\r\n                    return child;\r\n                }\r\n            });\r\n\r\n            if (self.props.type === \"feature\") {\r\n                var flayers = self.props.sublayers;\r\n                if(!flayers || self.props.sublayers.length<1) {\r\n                    flayers = [{id:0, title:\"\"}];\r\n                }\r\n\r\n                var gmaplayer = new GroupLayer();\r\n\r\n                var trans = 1;\r\n                if (self.props.transparency) {\r\n                    trans = Number.parseFloat(self.props.transparency);\r\n                }\r\n\r\n                flayers.forEach(function (sub) {\r\n                    //portalItem\r\n                    var glayer = new FeatureLayer({\r\n                        title: sub.title,\r\n                        outFields: [\"*\"],\r\n                        opacity: gtrans\r\n                    });    \r\n                    if(sub.visible===false){\r\n                        glayer.visible = false;\r\n                    }\r\n\r\n                    if(self.props.portalItem){\r\n                        glayer.portalItem = {id: self.props.src};\r\n                        glayer.layerId = sub.id;\r\n\r\n                    }else{\r\n                        glayer.url = self.props.src+sub.id;\r\n                    }\r\n\r\n                    var renderer = renderers.find(r => {\r\n                        if (r.props.layer === sub.title || r.props.layer === `${sub.id}`) {\r\n                            return r;\r\n                        }\r\n                    });\r\n                    if (renderer !== undefined) {\r\n                        glayer.renderer = renderer.props.style;\r\n                    }\r\n\r\n                    gmaplayer.layers.add(glayer);\r\n                }); \r\n                \r\n                var featureLayer = gmaplayer;\r\n                featureLayer.opacity = trans;\r\n\r\n                if (self.props.title) {\r\n                    featureLayer.title = self.props.title;\r\n                }\r\n\r\n                self.layerRef = featureLayer;\r\n                //self.state.map.add(featureLayer);\r\n            }\r\n\r\n            if(self.props.type === \"groupby\") {\r\n                var gtrans = 1;\r\n                if (self.props.transparency) {\r\n                    gtrans = Number.parseFloat(self.props.transparency);\r\n                }\r\n                var subChildren = React.Children.map(self.props.children, function (child) {\r\n                    return new ArcticMapLayer(child.props)\r\n                });\r\n\r\n                self.children = subChildren;\r\n                \r\n                var gbmaplayer = new GroupLayer({\r\n                    opacity: gtrans,\r\n                    visibilityMode: \"inherited\",\r\n                    visible: self.props.visible\r\n\r\n                });\r\n                if (self.props.title) {\r\n                    gbmaplayer.title = self.props.title;\r\n                }\r\n\r\n                subChildren.forEach(function (child) {\r\n                    if (child.props.type === \"dynamic\") {\r\n\r\n                        var trans = 1;\r\n                        if (child.props.transparency) {\r\n                            trans = Number.parseFloat(child.props.transparency);\r\n                        }\r\n        \r\n                        var maplayer = new MapImageLayer({\r\n                            url: child.props.src,\r\n                            opacity: trans\r\n                        });\r\n                        \r\n                        if(child.props.sublayers) {\r\n                            maplayer.sublayers = child.props.sublayers;\r\n                        }\r\n        \r\n                        if (child.props.childsrc);\r\n        \r\n                        if (child.props.title) {\r\n        \r\n                            maplayer.title = child.props.title;\r\n                        }\r\n        \r\n                        maplayer.on(\"layerview-create\", function (event) {\r\n                        });\r\n        \r\n                        maplayer.when(() => {\r\n                            var layerids = [];\r\n                            maplayer.allSublayers.items.forEach(sublayer => {\r\n                                layerids.push(sublayer.id);\r\n                                sublayer.when(function(e){\r\n                                    if(child.props.sublayers !== undefined){\r\n                                        child.props.sublayers.forEach(sub => {\r\n                                            if(sub.isVisible === false && (e.id === sub.id)){\r\n                                                e.visible = false;\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                });\r\n                                var renderer = renderers.find(r => {\r\n                                    if (r.props.layer === sublayer.title || r.props.layer === `${sublayer.id}`) {\r\n                                        return r;\r\n                                    }\r\n                                });\r\n                                if (renderer !== undefined) {\r\n                                    sublayer.renderer = renderer.props.style;\r\n                                    if (renderer.props.displayTitle !== undefined) {\r\n                                        sublayer.title = renderer.props.displayTitle;\r\n                                    }\r\n                                }\r\n                            });\r\n        \r\n                            child.identifyTask = new identify(child.props.src);\r\n                            child.params = new IdentifyParameters();\r\n                            child.params.tolerance = 3;\r\n                            child.params.layerIds = layerids;\r\n                            child.params.layerOption = \"visible\";\r\n                            child.params.width = self.state.view.width;\r\n                            child.params.height = self.state.view.height;\r\n                            child.params.returnGeometry = true;\r\n                            child.params.returnGeometry = !self.state.blockSelect;\r\n                        });\r\n        \r\n                        child.layerRef = maplayer;\r\n                    }\r\n        \r\n                    gbmaplayer.layers.push(maplayer);\r\n                });\r\n\r\n                self.layerRef = gbmaplayer;\r\n            }\r\n            \r\n            if (self.props.type === \"group\") {\r\n                var gtrans = 1;\r\n                if (self.props.transparency) {\r\n                    gtrans = Number.parseFloat(self.props.transparency);\r\n                }\r\n                var srcsplit = self.props.src.split(',');\r\n                \r\n                var gmaplayer = new GroupLayer({\r\n                    //url: self.props.src,\r\n                    opacity: gtrans,\r\n                    visibilityMode: \"inherited\"\r\n\r\n                });\r\n                if (self.props.title) {\r\n\r\n                    gmaplayer.title = self.props.title;\r\n                }\r\n\r\n                var idx = 0;\r\n                srcsplit.forEach(function (src) {\r\n                    var glayer = new MapImageLayer({\r\n                        url: src,\r\n                        opacity: gtrans\r\n\r\n                    });\r\n\r\n                    if(self.props.sublayers && self.props.sublayers.length>idx){\r\n                        glayer.sublayers = self.props.sublayers[idx];\r\n                        idx++;\r\n                    }\r\n\r\n                    gmaplayer.layers.add(glayer);\r\n\r\n                    glayer.when(() => {\r\n                        var layerids = [];                 \r\n                        //console.log(\"Maplayer: \", maplayer);\r\n                        glayer.allSublayers.items.forEach(sublayer => {\r\n                            layerids.push(sublayer.id);\r\n                            var renderer = renderers.find(r => {\r\n                                if (r.props.layer === sublayer.title || r.props.layer === `${sublayer.id}`) {\r\n                                    return r;\r\n                                }\r\n                            });\r\n                            if (renderer !== undefined) {\r\n                                sublayer.renderer = renderer.props.style;\r\n                            }\r\n                            //sublayer.renderer = Renderer.fromJSON(renderer);\r\n\r\n                        });\r\n                        layerids.reverse();\r\n                        if(src===srcsplit[srcsplit.length-1]){\r\n                            self.identifyTask = new identify(src);\r\n                            self.params = new IdentifyParameters();\r\n                            self.params.tolerance = 3;\r\n                            self.params.layerIds = layerids;\r\n                            self.params.layerOption = \"visible\";\r\n                            self.params.width = self.state.view.width;\r\n                            self.params.height = self.state.view.height;\r\n                            self.params.returnGeometry = true;\r\n                            self.params.returnGeometry = !self.state.blockSelect;\r\n                              //console.log(self.params);\r\n                        }\r\n                    });\r\n\r\n                });\r\n\r\n                self.layerRef = gmaplayer;\r\n                //self.state.map.add(gmaplayer);\r\n            }\r\n\r\n            if (self.props.type === \"dynamic\") {\r\n\r\n                var trans = 1;\r\n                if (self.props.transparency) {\r\n                    trans = Number.parseFloat(self.props.transparency);\r\n                }\r\n\r\n                var maplayer = new MapImageLayer({\r\n                    url: self.props.src,\r\n                    opacity: trans\r\n                });\r\n                \r\n                if(self.props.sublayers) {\r\n                    maplayer.sublayers = self.props.sublayers;\r\n                }\r\n\r\n                if (self.props.childsrc);\r\n\r\n                if (self.props.title) {\r\n\r\n                    maplayer.title = self.props.title;\r\n                }\r\n\r\n                maplayer.on(\"layerview-create\", function (event) {\r\n                    // console.lof(\"Layerview:\" , event)\r\n                });\r\n\r\n                maplayer.when(() => {\r\n                    var layerids = [];\r\n                    maplayer.allSublayers.items.forEach(sublayer => {\r\n                        layerids.push(sublayer.id);\r\n                        sublayer.when(function(e){\r\n                            if(self.props.sublayers !== undefined){\r\n                                self.props.sublayers.forEach(sub => {\r\n                                    if(sub.isVisible === false && (e.id === sub.id)){\r\n                                        e.visible = false;\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                        var renderer = renderers.find(r => {\r\n                            if (r.props.layer === sublayer.title || r.props.layer === `${sublayer.id}`) {\r\n                                return r;\r\n                            }\r\n                        });\r\n                        if (renderer !== undefined) {\r\n                            sublayer.renderer = renderer.props.style;\r\n                            if (renderer.props.displayTitle !== undefined) {\r\n                                sublayer.title = renderer.props.displayTitle;\r\n                            }\r\n                        }\r\n                        //sublayer.renderer = Renderer.fromJSON(renderer);\r\n                    });\r\n                    //layerids.reverse();\r\n\r\n                    self.identifyTask = new identify(self.props.src);\r\n                    self.params = new IdentifyParameters();\r\n                    self.params.tolerance = 3;\r\n                    self.params.layerIds = layerids;\r\n                    self.params.layerOption = \"visible\";\r\n                    self.params.width = self.state.view.width;\r\n                    self.params.height = self.state.view.height;\r\n                    self.params.returnGeometry = true;\r\n                    self.params.returnGeometry = !self.state.blockSelect;\r\n                });\r\n\r\n                self.layerRef = maplayer;\r\n                //self.state.map.add(maplayer);\r\n            }\r\n\r\n            if (self.props.type === \"image\") {\r\n                var imagelayer = new ImageryLayer({\r\n                    url: self.props.src,\r\n                    format: \"jpgpng\" // server exports in either jpg or png format\r\n                });\r\n                self.layerRef = imagelayer;\r\n                //self.state.map.add(imagelayer);\r\n            }\r\n\r\n            if (self.props.type === \"custom\") {\r\n                self.layerRef = self.props.layerRef;\r\n                //self.state.map.add(self.props.layerRef);\r\n            }\r\n            // if (self.props.type === \"geojson\") {\r\n\r\n            //     var geojsonLayer = new GraphicsLayer({ title: 'GeoJSON Layer', listMode: \"hide\" });\r\n            //     // var geojsonLayer = new GeoJSONLayer({\r\n            //     //     //source: self.props.src,\r\n            //     //     //copyright: \"USGS Earthquakes\",\r\n            //     //     //popupTemplate: template\r\n            //     //   });\r\n            //     var dataarr = [];\r\n\r\n            //     if (typeof self.props.src === 'object') {\r\n            //         if (self.props.src.features) {\r\n            //             dataarr = self.props.src.features;\r\n            //         }\r\n            //         else {\r\n            //             dataarr = self.props.src;\r\n            //         }\r\n            //     }\r\n\r\n            //     if (self.props.title) {\r\n\r\n            //         geojsonLayer.title = self.props.title;\r\n            //     }\r\n\r\n\r\n            //     dataarr.forEach(obj => {\r\n            //         //var esrijson = geojsonToArcGIS(obj);\r\n            //         if (obj.geometry.type === \"Point\") {\r\n\r\n            //             var popupTemplate = {\r\n            //                 title: \"{Name}\",\r\n            //                 content: self.props.template,\r\n            //             };\r\n\r\n\r\n            //             var point = new Point({\r\n            //                 longitude: obj.geometry.coordinates[1],\r\n            //                 latitude: obj.geometry.coordinates[0],\r\n\r\n            //             });\r\n\r\n            //             // Create a symbol for drawing the point\r\n            //             var markerSymbol = new SimpleMarkerSymbol({\r\n            //                 color: [226, 119, 40],\r\n            //                 outline: {\r\n            //                     color: [255, 255, 255],\r\n            //                     width: 1\r\n            //                 }\r\n            //             });\r\n\r\n            //             // Create a graphic and add the geometry and symbol to it\r\n            //             var pointGraphic = new Graphic({\r\n            //                 geometry: point,\r\n            //                 symbol: markerSymbol,\r\n            //                 attributes: obj.properties,\r\n            //                 popupTemplate: popupTemplate,\r\n            //                 // extent : new Extent().centerAt(point)\r\n            //             });\r\n\r\n            //             // Add the graphic to the view\r\n            //             geojsonLayer.graphics.add(pointGraphic);\r\n            //         }\r\n\r\n\r\n            //     })\r\n\r\n\r\n            //     self.layerRef = geojsonLayer;\r\n            //     self.state.map.add(geojsonLayer);\r\n            //     // var imagelayer = new ImageryLayer({\r\n            //     //     url: self.props.src,\r\n            //     //     format: \"jpgpng\" // server exports in either jpg or png format\r\n            //     // });\r\n            //     // self.layerRef = imagelayer;\r\n            //     // self.state.map.add(imagelayer);\r\n\r\n            // }\r\n            if(self.props.visible !== undefined && self.props.visible === \"false\"){\r\n                self.layerRef.visible = false;\r\n\r\n            }\r\n\r\n            self.state.map.add(self.layerRef);\r\n            self.layerRef.when(function () {\r\n                setTimeout(() => {\r\n                    var evt = new Event('ready', { bubbles: true });\r\n                    Object.defineProperty(evt, 'target', { value: self, enumerable: true });\r\n\r\n                    if (self.props.onready) {\r\n                        self.props.onready(evt);\r\n                    }\r\n                }, 500)\r\n            });\r\n\r\n            //this.state.view.graphics.add(graphic);\r\n        }); //.catch ((err) => console.error(err));\r\n    }\r\n\r\n    zoomto() {\r\n        if (this.layerRef.graphics) {\r\n            this.state.view.goTo(this.layerRef.graphics.items);\r\n        }\r\n\r\n    }\r\n\r\n    renderPopupTitle(feature, result){\r\n        if(result.layerId !== undefined && this.layerRenderers) {\r\n            var popupTitle = this.layerRenderers.find(l => l.props.layerid === result.layerId.toString());\r\n            if (popupTitle  && result.layerId == popupTitle.props.layerid) {\r\n                if(popupTitle.props.popuptitle) return popupTitle.props.popuptitle;\r\n                else return result.layerName;\r\n            } else {\r\n                popupTitle = this.layerRenderers.find(l => l.props.layerid === null);\r\n                if(popupTitle && popupTitle.props.popuptitle) return popupTitle.props.popuptitle;\r\n                return result.layerName;\r\n            }\r\n        } else {\r\n            return result.layerName;\r\n        }\r\n    }\r\n\r\n    renderPopup(feature, result) {\r\n        console.log(\"renderPopup\",result);\r\n\r\n        if (result.layerId !== undefined && this.layerRenderers) {\r\n            var popuprender = this.layerRenderers.find(l => l.props.layerid === result.layerId.toString());\r\n            if (!popuprender) popuprender = this.layerRenderers.find(l => l.props.layerid === null);\r\n            if (popuprender && popuprender.props.popup !== undefined) {\r\n                var ele = popuprender.props.popup(feature, result);\r\n\r\n\r\n                if (ele) {\r\n                    var workingdiv = document.createElement('div');\r\n                    ReactDOM.render(ele, workingdiv);\r\n                    return workingdiv;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        var popupText = \"\";\r\n        if(feature.attributes){\r\n            var atts = Object.getOwnPropertyNames(feature.attributes);\r\n            atts.forEach(att => {\r\n                if (att === 'layerName') {\r\n    \r\n                }\r\n                else {\r\n                    popupText += `<b>${att}</b> : ${feature.attributes[att]}<br/>`;\r\n                }\r\n            });\r\n        }\r\n\r\n        return popupText;\r\n\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n\r\n    identify(event, callback) {\r\n        \r\n        var self = this;\r\n        //console.log(\"identify\", self)\r\n        \r\n        if (this.props.type === \"geojson\") {\r\n\r\n            this.state.view.hitTest(event).then((htresponse) => {\r\n\r\n                // console.log(\"Identify on geojson\");\r\n                //console.log(htresponse);\r\n                var mapPoint = event.mapPoint;\r\n                var response = {\r\n                    layer: self,\r\n                    results: htresponse.results.map(r => { return { feature: r.graphic, layerName: self.layerRef.title }; }),\r\n                }\r\n                callback([response])\r\n            });\r\n\r\n        }\r\n        else if (this.props.type === \"feature\") {\r\n            //this probably has errors but we are not using it \r\n            this.state.view.hitTest(event).then((htresponse) => {\r\n\r\n                // console.log(\"Identify on geojson\");\r\n                //console.log(htresponse);\r\n                var mapPoint = event.mapPoint;\r\n                var layersLeft = self.layerRef.layers.length;\r\n                var responses = [];\r\n                self.layerRef.layers.map((layer) => {\r\n                    layer.queryFeatures({\r\n                        //query object\r\n                        geometry: mapPoint,\r\n                        spatialRelationship: \"intersects\",\r\n                        returnGeometry: !self.state.blockSelect,\r\n                        outFields: [\"*\"],\r\n                      })\r\n                      .then((response) => {\r\n                        responses = responses.concat(response.features);\r\n                        layersLeft--;\r\n\r\n                        if(layersLeft<1){\r\n                            var res = responses.map(feat => {\r\n                                return {\r\n                                    feature:feat,\r\n                                    layerName:feat.layer.title,\r\n                                    layerId:feat.layer.layerId\r\n                                };\r\n\r\n                            });\r\n\r\n                            callback({results:res});\r\n                        } \r\n                      });\r\n                }); \r\n            });\r\n        }\r\n        else if (this.props.type === \"groupby\") {\r\n            var allResponse = [];\r\n            Promise.allSettled(self.children.map(function (item,index) {\r\n                return new Promise((res, rej) => {\r\n                    item.params.geometry = event.mapPoint;\r\n                    item.params.mapExtent = self.state.view.extent;\r\n                    item.identifyTask.execute(item.params).then(function (response) {\r\n                        response.layer=item;\r\n                        response.layer.layerRenderers = item.props.children;\r\n                        allResponse.push(response);\r\n                        res();\r\n                    });\r\n                    \r\n                });\r\n            })).then(() => {callback(allResponse);});\r\n        }   \r\n        else {\r\n            if (!this.params) { callback(null); return; }\r\n\r\n            this.params.geometry = event.mapPoint;\r\n            this.params.mapExtent = this.state.view.extent;\r\n            this.identifyTask.execute(this.params).then(function (response) {\r\n                response.layer = self;\r\n                callback([response]);\r\n            });\r\n        }\r\n    }\r\n\r\n    identifyArea(eventPS, eventPE, sublayers, callback) {\r\n        var self = this;\r\n        loadModules([\"esri/geometry/Multipoint\"]).then(([Multipoint]) => {\r\n            var points = new Multipoint();\r\n            points.addPoint(eventPS);\r\n            points.addPoint(eventPE);\r\n    \r\n            if (!self.params) { callback(null); return; }\r\n\r\n            var layerids = self.params.layerIds;\r\n    \r\n            self.params.layerIds = sublayers;\r\n            self.params.geometry = points.extent;\r\n            self.params.geometry.spatialReference = self.state.view.extent.spatialReference;\r\n            self.params.mapExtent = self.state.view.extent;\r\n            self.identifyTask.execute(self.params).then(function (response) {\r\n                self.params.layerIds = layerids;\r\n                //console.log(\"identifyArea\", response)\r\n                callback(response);\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapLayer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { arcgisToGeoJSON } from '@esri/arcgis-to-geojson-utils';\r\nimport ArcticMapButton from './ArcticMapButton';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\nimport ArcticMapLayer from './ArcticMapLayer';\r\nimport { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\nimport style from  './ArcticMapEdit.css';\r\n//import {\r\n//    loadModules\r\n//} from 'react-arcgis';\r\n\r\n// Use @arcgis/core or esri-loader directly in your React application\r\nimport { setDefaultOptions } from 'esri-loader';\r\n\r\n// configure esri-loader to use version 4.25\r\n// and the CSS for that version from the ArcGIS CDN\r\nsetDefaultOptions({ version: '4.25', css: true, insertCssBefore: 'style' });\r\n\r\nclass ArcticMapEdit extends React.Component {\r\n    static displayName = 'ArcticMapEdit';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        props.map.editor = this;\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null,\r\n            hideEditors: false,\r\n            editing: false,\r\n            showUploading: false,\r\n            hidden: !this.props.hidden ? false : true,            \r\n        };\r\n\r\n        this.uploadPanel = React.createRef();\r\n\r\n        ArcticMapEdit.defaultProps = {\r\n            uploadPanelInfoAreaText: \"Do you already have a shape of your case? Upload your file here. Supported geometries: polygon and polyline. Supported file types: Shapefiles (.zip), kml, gml, gpx, and geojson.\"\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.view.graphics.remove(this.state.graphic);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n\r\n\r\n        var self = this;\r\n        loadModules([\"esri/Graphic\",\r\n            \"esri/layers/GraphicsLayer\",\r\n            \"esri/widgets/Sketch/SketchViewModel\",\r\n            \"esri/geometry/Geometry\",\r\n            \"esri/geometry/Polygon\",\r\n            \"esri/geometry/Polyline\",\r\n            \"esri/geometry/geometryEngine\"\r\n        ]).then(([\r\n            Graphic,\r\n            GraphicsLayer,\r\n            SketchViewModel,\r\n            Geometry,\r\n            Polygon,\r\n            Polyline,\r\n            geometryEngine\r\n        ]) => {\r\n            const tempGraphicsLayer = new GraphicsLayer({ title: 'Edit Layer', listMode: \"hide\" });\r\n            self.setState({ tempGraphicsLayer });\r\n\r\n            self.state.map.add(tempGraphicsLayer);\r\n\r\n\r\n            const sketchViewModel = new SketchViewModel({\r\n                view: self.state.view,\r\n                layer: tempGraphicsLayer,\r\n                defaultUpdateOptions :{\r\n                   // toggleToolOnClick : false\r\n                },\r\n                pointSymbol: {\r\n                    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\r\n                    style: \"circle\",\r\n                    color: \"yellow\",\r\n                    size: \"3px\",\r\n                    outline: { // autocasts as new SimpleLineSymbol()\r\n                        color: [255, 255, 255],\r\n                        width: 3\r\n                    }\r\n                },\r\n                polylineSymbol: {\r\n                    type: \"simple-line\", // autocasts as new SimpleLineSymbol()\r\n                    color: \"yellow\",\r\n                    width: \"3\",\r\n                    style: \"solid\"\r\n                },\r\n                polygonSymbol: {\r\n                    type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                    color: \"rgba(224, 206, 69, 0.8)\",\r\n                    style: \"solid\",\r\n                    outline: {\r\n                        color: \"yellow\",\r\n                        width: 3\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (this.props.updateongraphicclick !== undefined) {\r\n                sketchViewModel.updateOnGraphicClick = this.props.updateongraphicclick;\r\n            }\r\n\r\n            self.setState({ tempGraphicsLayer, sketchViewModel });\r\n\r\n            self.setUpClickHandler.bind(this);\r\n\r\n            sketchViewModel.on(\"create\", (event) => {\r\n\r\n                if (event.state === 'complete') {\r\n\r\n                    tempGraphicsLayer.graphics = [event.graphic];\r\n                    if (this.props.single) {\r\n\r\n                        this.setState({ hideEditors: true });\r\n                    }\r\n\r\n                    setTimeout(() => {\r\n\r\n                        self.setState({ geojson: arcgisToGeoJSON(event.graphic.geometry.toJSON()), datajson: event.graphic.toJSON(), editing: false });\r\n                        self.firenewfeature();\r\n                    }, 1000);\r\n\r\n                }\r\n            });\r\n\r\n            sketchViewModel.on(\"update\", (event) => {\r\n                self.setState({ editing: true });\r\n                if(event.state === 'start' && self.state.mode === 'select'){\r\n                    return false;\r\n                }\r\n                if (event.state === 'complete' || event.state === 'cancel') {\r\n                    // const graphic = new Graphic({\r\n                    //     geometry: event.graphic.geometry,\r\n                    //     symbol: event.graphic.symbol\r\n                    // });\r\n                    //tempGraphicsLayer.add(event.graphic);\r\n                    // if (this.props.single) {\r\n                    //     console.log(\"Added one feature\");\r\n                    //     this.setState({ hideEditors: true });\r\n                    // }\r\n\r\n                    setTimeout(() => {\r\n                        self.setState({ geojson: arcgisToGeoJSON(event.graphics[0].geometry.toJSON()), datajson: event.graphics[0].toJSON(), });\r\n                        //this.geojson = event.geometry;\r\n                        self.firenewfeature();\r\n                    }, 1000);\r\n\r\n                }\r\n            });\r\n\r\n            // Listen the sketchViewModel's update-complete and update-cancel events\r\n            sketchViewModel.on(\"update-complete\", (event) => {\r\n                event.graphic.geometry = event.geometry;\r\n                tempGraphicsLayer.graphics = [event.graphic];\r\n                //tempGraphicsLayer.add(event.graphic);\r\n\r\n                // set the editGraphic to null update is complete or cancelled.\r\n                self.state.editGraphic = null;\r\n            });\r\n\r\n            this.top_right_node = document.createElement(\"div\");\r\n            self.state.view.ui.add(this.top_right_node, \"top-right\");\r\n\r\n            self.setState({ loaded: true })\r\n\r\n            //self.setUpClickHandler();\r\n\r\n            // scoped methods\r\n            self.setEditFeature = (feature, nofire, type, zoomto, addto, trim) => {\r\n                \r\n                if (nofire === null) {\r\n                    nofire = false;\r\n                }\r\n\r\n                if (type === null) {\r\n                    type = \"polygon\";\r\n                }\r\n\r\n                if (zoomto === null) {\r\n                    zoomto = true;\r\n                }\r\n\r\n                if (addto === null) {\r\n                    addto = false;\r\n                }\r\n                if (trim === null) {\r\n                    trim = false;\r\n                }\r\n\r\n                if (feature.attributes.layerName) {\r\n                    feature.sourceLayer = feature.attributes.layerName.trim();\r\n                } else {\r\n                    feature.sourceLayer = 'PLSS';\r\n                }\r\n\r\n                if (!feature.geometry.type) {\r\n                    if (type === \"polygon\") {\r\n                        \r\n                        feature.geometry = new Polygon(feature.geometry);\r\n                        feature.geometry.type = \"polygon\";\r\n                    }\r\n                    if (type === \"polyline\") {\r\n                        feature.geometry = new Polyline(feature.geometry);\r\n                        feature.geometry.type = \"polyline\";\r\n                    }\r\n                }\r\n\r\n                this.state.sketchViewModel.cancel();\r\n                if (!addto) {\r\n                    this.state.tempGraphicsLayer.removeAll();\r\n                }\r\n                this.setState({ hideEditors: false, geojson: null });\r\n\r\n\r\n                var graphic = null;\r\n                if (!feature.geometry.toJSON && feature.symbol) {\r\n                    graphic = Graphic.fromJSON(feature);\r\n\r\n                }\r\n                else {\r\n                    if(feature.geometry.type === \"polygon\") {\r\n                        graphic = new Graphic({\r\n                            geometry: feature.geometry,\r\n                            symbol: this.state.sketchViewModel.polygonSymbol\r\n                        });\r\n                    }\r\n                    if(feature.geometry.type === \"polyline\") {\r\n                        graphic = new Graphic({\r\n                            geometry: feature.geometry,\r\n                            symbol: this.state.sketchViewModel.polylineSymbol\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (graphic.geometry === null) {\r\n                    graphic.geometry = feature.geometry;\r\n                    \r\n                }\r\n\r\n                if (trim) {\r\n                    if (this.state.tempGraphicsLayer.graphics.items.length > 0) {\r\n\r\n                        var geometrys = this.state.tempGraphicsLayer.graphics.items.map(i => i.geometry);\r\n                        \r\n                        var merge = geometryEngine.union(geometrys);\r\n                        var isEqual = geometryEngine.equals(merge, graphic.geometry);\r\n                        if(!isEqual) {\r\n                            merge = geometryEngine.difference(merge, graphic.geometry);\r\n                            graphic = new Graphic({\r\n                                geometry: merge,\r\n                                symbol: this.state.sketchViewModel.polygonSymbol\r\n                            });\r\n                            graphic.geometry.sourceLayer = feature.sourceLayer;\r\n                            this.state.tempGraphicsLayer.graphics = [graphic];\r\n                        } else {\r\n                            this.state.tempGraphicsLayer.graphics = null;\r\n                        }\r\n                        \r\n\r\n                    }\r\n                }\r\n                else {\r\n                    this.state.tempGraphicsLayer.add(graphic);\r\n\r\n                    if (this.state.tempGraphicsLayer.graphics.items.length > 0) {\r\n\r\n                        var geometrys = this.state.tempGraphicsLayer.graphics.items.map(i => i.geometry);\r\n\r\n\r\n                        var merge = geometryEngine.union(geometrys);\r\n                        if(merge.type ===\"polygon\"){\r\n                            graphic = new Graphic({\r\n                                geometry: merge,\r\n                                symbol: this.state.sketchViewModel.polygonSymbol\r\n                            });\r\n                        }\r\n                        if(merge.type ===\"polyline\"){\r\n                            graphic = new Graphic({\r\n                                geometry: merge,\r\n                                symbol: this.state.sketchViewModel.polylineSymbol\r\n                            });\r\n                        }\r\n                        graphic.geometry.sourceLayer = feature.sourceLayer;\r\n                        this.state.tempGraphicsLayer.graphics = [graphic]\r\n                    }\r\n                }\r\n                //this.state.tempGraphicsLayer.graphics = [graphic];\r\n                if (this.props.single) {\r\n\r\n                    this.setState({ hideEditors: true });\r\n                }\r\n\r\n                if (zoomto) {\r\n\r\n                    self.state.view.goTo(graphic);\r\n                }\r\n\r\n                var geometry = feature.geometry;\r\n                if (geometry && !geometry.toJSON) {\r\n                    geometry = Geometry.fromJSON(geometry);\r\n                }\r\n\r\n                this.setState({ geojson: arcgisToGeoJSON(geometry.toJSON()), datajson: graphic.toJSON(), });\r\n\r\n                if (nofire === true) {\r\n\r\n                }\r\n                else {\r\n                    self.firenewfeature();\r\n                }\r\n\r\n            };\r\n\r\n            self.setEditFeature = self.setEditFeature.bind(self);\r\n\r\n            self.setGeoJson = (geojson) => {\r\n                //var esrijson = geojsonToArcGIS(geojson);\r\n            }\r\n            self.setGeoJson = self.setGeoJson.bind(self);\r\n\r\n        }); //.catch ((err) => console.error(err));\r\n\r\n    }\r\n\r\n    firenewfeature() {\r\n        var self = this;\r\n        var evt = new Event('newfeature', { bubbles: true });\r\n        Object.defineProperty(evt, 'target', { value: this, enumerable: true });\r\n        evt.data = self.state.datajson;\r\n\r\n        if (self.props.onnewfeature) {\r\n            self.props.onnewfeature(evt);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            self.setState({ editing: false });\r\n        }, 200);\r\n    }\r\n\r\n    addPointClick() {\r\n        this.state.sketchViewModel.create(\"point\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n\r\n    addLineClick() {\r\n        this.state.sketchViewModel.create(\"polyline\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addPolyClick() {\r\n        this.state.sketchViewModel.create(\"polygon\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addRecClick() {\r\n        this.state.sketchViewModel.create(\"rectangle\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n    addCircleClick() {\r\n        this.state.sketchViewModel.create(\"circle\", { mode: \"click\" });\r\n        this.setState({ editing: true });\r\n    }\r\n\r\n    fileUploaded(evt) {\r\n        var self = this;\r\n        var fileName = evt.target.value.toLowerCase();\r\n        if (fileName.indexOf(\".zip\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n            self.processShapeFile(fileName, evt.target);\r\n        }\r\n        else if (fileName.indexOf(\".kml\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n            self.processKMLFile(fileName, evt.target);\r\n        }\r\n        else if (fileName.indexOf(\".geojson\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n\r\n            self.processGeojsonFile(fileName, evt.target);\r\n        }\r\n        else if (fileName.indexOf(\".gml\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n\r\n            self.processGMLFile(fileName, evt.target);\r\n        }\r\n        else if (fileName.indexOf(\".gpx\") !== -1) {\r\n            // console.log(\"addEventListener\", self);\r\n\r\n            self.processGPXFile(fileName, evt.target);\r\n        }\r\n        else {\r\n            document.getElementById(\"upload-status\").innerHTML =\r\n                '<p style=\"color:red\">Only shapefile(.zip), .gml, .gpx, .kml, or .geojson are supported</p>'\r\n        }\r\n    }\r\n\r\n    readTextFile(file) {\r\n        return new Promise((res, rej) => {\r\n            var fr = new FileReader();\r\n            fr.onload = (evt) => {\r\n                res(evt.target.result);\r\n            }\r\n            fr.readAsText(file);\r\n        });\r\n    }\r\n\r\n    kmlColor(v) {\r\n        var color, opacity;\r\n        v = v || '';\r\n        if (v.substr(0, 1) === '#') { v = v.substr(1); }\r\n        if (v.length === 6 || v.length === 3) { color = v; }\r\n        if (v.length === 8) {\r\n            opacity = parseInt(v.substr(0, 2), 16) / 255;\r\n            color = '#' + v.substr(6, 2) +\r\n                v.substr(4, 2) +\r\n                v.substr(2, 2);\r\n        }\r\n        return [color, isNaN(opacity) ? undefined : opacity];\r\n    }\r\n\r\n    processGPXFile(fileName, form) {\r\n        var file = fileName.replace(/^.*[\\\\\\/]/, '');\r\n        var self = this;\r\n        this.readTextFile(form.files[0]).then(text =>{\r\n            var parser = new DOMParser();\r\n            var gj = self.fc();\r\n            var xmlDoc = parser.parseFromString(text, \"text/xml\");\r\n            var trkMember = self.get(xmlDoc,\"trk\");\r\n            for (var j = 0; j < trkMember.length; j++) {\r\n                gj.features = gj.features.concat(self.getTRKMember(trkMember[j]));\r\n            }\r\n            var features = [];\r\n            gj.features.forEach(f=> {\r\n                var esrijson = geojsonToArcGIS(f);\r\n                features.push(esrijson);\r\n            });\r\n            if(self.addGeojsonToMap(features, file, \"GPX\"))\r\n                self.uploadPanel.current.toggle();\r\n        });\r\n    }\r\n\r\n    getTRKMember(root) {\r\n        var geometryProperty = this.get(root, \"trkseg\");\r\n        var geomsCoord = this.getGeometry(geometryProperty[0]);\r\n        var feature = {\r\n            type: 'Feature',\r\n            geometry: (geomsCoord.geoms.length === 1) ? geomsCoord.geoms[0] : {\r\n                type: 'GeometryCollection',\r\n                geometries: geomsCoord.geoms\r\n            },\r\n            //properties: properties\r\n        };\r\n        if (this.attr(root, 'id')) feature.id = this.attr(root, 'id');\r\n        return [feature];\r\n    }\r\n\r\n    processGMLFile(fileName, form) {\r\n        var file = fileName.replace(/^.*[\\\\\\/]/, '');\r\n        var self = this;\r\n        this.readTextFile(form.files[0]).then(text =>{\r\n            var parser = new DOMParser();\r\n            var gj = self.fc();\r\n            var xmlDoc = parser.parseFromString(text, \"text/xml\");\r\n            var Polygon = self.get(xmlDoc,\"gml:Polygon\");\r\n            var LineString = self.get(xmlDoc, \"gml:LineString\");\r\n            var sr = 0;\r\n            if(Polygon.length>0) {\r\n                var srp = Polygon[0].attributes[\"srsName\"].nodeValue.split(\":\");\r\n                sr=srp[srp.length-1];\r\n            } else if (LineString.length>0) {\r\n                var srp = LineString[0].attributes[\"srsName\"].nodeValue.split(\":\");\r\n                sr=srp[srp.length-1];\r\n            }\r\n            var featureMember = self.get(xmlDoc,\"gml:featureMember\");\r\n            for (var j = 0; j < featureMember.length; j++) {\r\n                gj.features = gj.features.concat(self.getFeatureMember(featureMember[j]));\r\n            }\r\n            var features = [];\r\n            \r\n            gj.features.forEach(f=> {\r\n                var esrijson = geojsonToArcGIS(f);\r\n                esrijson.geometry.spatialReference.wkid = sr;\r\n                features.push(esrijson);\r\n            });\r\n            if(self.addGeojsonToMap(features, file, \"GML\"))\r\n                self.uploadPanel.current.toggle();\r\n        });\r\n        \r\n    }\r\n\r\n    getFeatureMember(root) {\r\n        var geometryProperty = this.get(root, \"ogr:geometryProperty\");\r\n        var geomsCoord = this.getGeometry(geometryProperty[0]);\r\n        var feature = {\r\n            type: 'Feature',\r\n            geometry: (geomsCoord.geoms.length === 1) ? geomsCoord.geoms[0] : {\r\n                type: 'GeometryCollection',\r\n                geometries: geomsCoord.geoms\r\n            },\r\n            //properties: properties\r\n        };\r\n        if (this.attr(root, 'id')) feature.id = this.attr(root, 'id');\r\n        return [feature];\r\n    }\r\n\r\n    getGeometry(root) {\r\n        \r\n        var geotypes = [ 'LineString', 'gml:LineString', 'Polygon', 'Point', 'Track', 'gx:Track', 'gml:Polygon', 'trkpt'];\r\n        var geomNode, geomNodes, i, j, k, geoms = [], coordTimes = [];\r\n        if (this.get1(root, 'MultiGeometry')) { return this.getGeometry(this.get1(root, 'MultiGeometry')); }\r\n        if (this.get1(root, 'MultiTrack')) { return this.getGeometry(this.get1(root, 'MultiTrack')); }\r\n        if (this.get1(root, 'gx:MultiTrack')) { return this.getGeometry(this.get1(root, 'gx:MultiTrack')); }\r\n        if (this.get1(root, 'trkpt')) {\r\n            geomNodes = this.get(root, 'trkpt');\r\n            coords = [];\r\n                for (k = 0;  k < geomNodes.length; k ++) {\r\n                    coords.push([parseFloat(geomNodes[k].attributes[1].nodeValue), parseFloat(geomNodes[k].attributes[0].nodeValue)]);                   \r\n                }\r\n                geoms.push({\r\n                    type: 'Polygon',\r\n                    coordinates: [coords]\r\n                });\r\n        }\r\n        for (i = 0; i < geotypes.length; i++) {\r\n            geomNodes = this.get(root, geotypes[i]);\r\n            if (geomNodes) {\r\n                for (j = 0; j < geomNodes.length; j++) {\r\n                    geomNode = geomNodes[j];\r\n                    if (geotypes[i] === 'Point') {\r\n                        geoms.push({\r\n                            type: 'Point',\r\n                            coordinates: this.coord1(this.nodeVal(this.get1(geomNode, 'coordinates')))\r\n                        });\r\n                    } else if (geotypes[i] === 'LineString') {\r\n                        geoms.push({\r\n                            type: 'LineString',\r\n                            coordinates: this.coord(this.nodeVal(this.get1(geomNode, 'coordinates')))\r\n                        });\r\n                    } else if (geotypes[i] === 'gml:LineString') {\r\n                        geoms.push({\r\n                            type: 'LineString',\r\n                            coordinates: this.coord(this.nodeVal(this.get1(geomNode, 'gml:coordinates')))\r\n                        });\r\n                    } else if (geotypes[i] === 'Polygon') {\r\n                        var rings = this.get(geomNode, 'LinearRing'),\r\n                            coords = [];\r\n                        for (k = 0; k < rings.length; k++) {\r\n                            \r\n                            coords.push(this.coord(this.nodeVal(this.get1(rings[k], 'coordinates'))));\r\n                        }\r\n                        geoms.push({\r\n                            type: 'Polygon',\r\n                            coordinates: coords\r\n                        });\r\n                    } else if (geotypes[i] === 'gml:Polygon') {\r\n                        var rings = this.get(geomNode, 'gml:LinearRing'),\r\n                            coords = [];\r\n                        for (k = 0; k < rings.length; k++) {\r\n                            \r\n                            coords.push(this.coord(this.nodeVal(this.get1(rings[k], 'gml:coordinates'))));\r\n                        }\r\n                        geoms.push({\r\n                            type: 'Polygon',\r\n                            coordinates: coords\r\n                        });\r\n                    }  else if (geotypes[i] === 'Track' ||\r\n                        geotypes[i] === 'gx:Track') {\r\n                        var track = this.gxCoords(geomNode);\r\n                        geoms.push({\r\n                            type: 'LineString',\r\n                            coordinates: track.coords\r\n                        });\r\n                        if (track.times.length) coordTimes.push(track.times);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n            \r\n            return {\r\n                geoms: geoms,\r\n                coordTimes: coordTimes\r\n            };\r\n        \r\n    }\r\n\r\n    nodeVal(x) {\r\n        if (x) { this.norm(x); }\r\n        return (x && x.textContent) || '';\r\n    }\r\n\r\n    fc() {\r\n        return {\r\n            type: 'FeatureCollection',\r\n            features: []\r\n        }\r\n    }\r\n\r\n    xml2str(str) {\r\n        var serializer;\r\n        if (typeof XMLSerializer !== 'undefined') {\r\n            /* istanbul ignore next */\r\n            serializer = new XMLSerializer();\r\n        } \r\n        if (str.xml !== undefined) return str.xml;\r\n        return serializer.serializeToString(str);\r\n    }\r\n    okhash(x) {\r\n        if (!x || !x.length) return 0;\r\n        for (var i = 0, h = 0; i < x.length; i++) {\r\n            h = ((h << 5) - h) + x.charCodeAt(i) | 0;\r\n        } return h;\r\n    }\r\n    get(x, y) {return x.getElementsByTagName(y); }\r\n    attr(x, y) { return x.getAttribute(y); }\r\n    attrf(x, y) { return parseFloat(this.attr(x, y)); }\r\n    get1(x, y) { \r\n        var n = this.get(x, y); \r\n        return n.length ? n[0] : null; }\r\n    norm(el) { if (el.normalize) { el.normalize(); } return el; }\r\n    coord1(v) { \r\n        var removeSpace = /\\s*/g;\r\n        return this.numarray(v.replace(removeSpace, '').split(',')); \r\n    }\r\n    coord(v) {\r\n        var trimSpace = /^\\s*|\\s*$/g;\r\n        var splitSpace = /\\s+/;\r\n        var coords = v.replace(trimSpace, '').split(splitSpace),o = [];\r\n        \r\n        for (var i = 0; i < coords.length; i++) {\r\n            o.push(this.coord1(coords[i]));\r\n        }\r\n        \r\n        return o;\r\n    }\r\n    gxCoord(v) { return this.numarray(v.split(' ')); }\r\n    numarray(x) {\r\n        \r\n        for (var j = 0, o = []; j < x.length; j++) { o[j] = parseFloat(x[j]); }\r\n        return o;\r\n    }\r\n    gxCoords(root) {\r\n        var elems = this.get(root, 'coord', 'gx'), coords = [], times = [];\r\n        if (elems.length === 0) elems = this.get(root, 'gx:coord');\r\n        for (var i = 0; i < elems.length; i++) coords.push(this.gxCoord(this.nodeVal(elems[i])));\r\n        var timeElems = this.get(root, 'when');\r\n        for (var j = 0; j < timeElems.length; j++) times.push(this.nodeVal(timeElems[j]));\r\n        return {\r\n            coords: coords,\r\n            times: times\r\n        };\r\n    }\r\n\r\n    processKMLFile(fileName, form) {\r\n        var file = fileName.replace(/^.*[\\\\\\/]/, '')\r\n        var self = this;\r\n\r\n        this.readTextFile(form.files[0]).then(text => {\r\n            var parser = new DOMParser();\r\n            var gj = self.fc()\r\n            var xmlDoc = parser.parseFromString(text, \"text/xml\");\r\n            var placemarks = self.get(xmlDoc, \"Placemark\");\r\n            var styles = self.get(xmlDoc, \"Style\");\r\n            var styleMaps = self.get(xmlDoc, \"StyleMap\");\r\n            var styleIndex = {};\r\n            var styleByHash = {};\r\n            var styleMapIndex = {};\r\n            for (var k = 0; k < styles.length; k++) {\r\n                var hash = self.okhash(self.xml2str(styles[k])).toString(16);\r\n                styleIndex['#' + self.attr(styles[k], 'id')] = hash;\r\n                styleByHash[hash] = styles[k];\r\n            }\r\n            for (var l = 0; l < styleMaps.length; l++) {\r\n                styleIndex['#' + self.attr(styleMaps[l], 'id')] = self.okhash(self.xml2str(styleMaps[l])).toString(16);\r\n                var pairs = self.get(styleMaps[l], 'Pair');\r\n                var pairsMap = {};\r\n                for (var m = 0; m < pairs.length; m++) {\r\n                    pairsMap[self.nodeVal(self.get1(pairs[m], 'key'))] = self.nodeVal(self.get1(pairs[m], 'styleUrl'));\r\n                }\r\n                styleMapIndex['#' + self.attr(styleMaps[l], 'id')] = pairsMap;\r\n\r\n            }\r\n            for (var j = 0; j < placemarks.length; j++) {\r\n                gj.features = gj.features.concat(self.getPlacemark(placemarks[j]));\r\n            }\r\n            \r\n            var features = [];\r\n\r\n            gj.features.forEach(f=> {\r\n                var esrijson = geojsonToArcGIS(f);\r\n                features.push(esrijson);\r\n            });\r\n            if(self.addGeojsonToMap(features, file, \"KML\"))\r\n                self.uploadPanel.current.toggle();\r\n\r\n        });\r\n\r\n    }\r\n    getPlacemark(root) {\r\n        var geomsAndTimes = this.getGeometry(root), i, properties = {},\r\n            name = this.nodeVal(this.get1(root, 'name')),\r\n            address = this.nodeVal(this.get1(root, 'address')),\r\n            styleUrl = this.nodeVal(this.get1(root, 'styleUrl')),\r\n            styleIndex = {},\r\n            styleMapIndex = {},\r\n            styleByHash = {},\r\n            description = this.nodeVal(this.get1(root, 'description')),\r\n            timeSpan = this.get1(root, 'TimeSpan'),\r\n            timeStamp = this.get1(root, 'TimeStamp'),\r\n            extendedData = this.get1(root, 'ExtendedData'),\r\n            lineStyle = this.get1(root, 'LineStyle'),\r\n            polyStyle = this.get1(root, 'PolyStyle'),\r\n            visibility = this.get1(root, 'visibility');\r\n\r\n        if (!geomsAndTimes.geoms.length) return [];\r\n        if (name) properties.name = name;\r\n        if (address) properties.address = address;\r\n\r\n        if (styleUrl) {\r\n            if (styleUrl[0] !== '#') {\r\n                styleUrl = '#' + styleUrl;\r\n            }\r\n            properties.styleUrl = styleUrl;\r\n            if (styleIndex[styleUrl]) {\r\n                properties.styleHash = styleIndex[styleUrl];\r\n            }\r\n            if (styleMapIndex[styleUrl]) {\r\n                properties.styleMapHash = styleMapIndex[styleUrl];\r\n                properties.styleHash = styleIndex[styleMapIndex[styleUrl].normal];\r\n            }\r\n            var style = styleByHash[properties.styleHash];\r\n            if (style) {\r\n                if (!lineStyle) lineStyle = this.get1(style, 'LineStyle');\r\n                if (!polyStyle) polyStyle = this.get1(style, 'PolyStyle');\r\n                var iconStyle = this.get1(style, 'IconStyle');\r\n                if (iconStyle) {\r\n                    var icon = this.get1(iconStyle, 'Icon');\r\n                    if (icon) {\r\n                        var href = this.nodeVal(this.get1(icon, 'href'));\r\n                        if (href) properties.icon = href;\r\n                    }\r\n                }\r\n            }\r\n            if (description) properties.description = description;\r\n            if (timeSpan) {\r\n                var begin = this.nodeVal(this.get1(timeSpan, 'begin'));\r\n                var end = this.nodeVal(this.get1(timeSpan, 'end'));\r\n                properties.timespan = { begin: begin, end: end };\r\n            }\r\n            if (timeStamp) {\r\n                properties.timestamp = this.nodeVal(this.get1(timeStamp, 'when'));\r\n            }\r\n            if (lineStyle) {\r\n                var linestyles = this.kmlColor(this.nodeVal(this.get1(lineStyle, 'color'))),\r\n                    color = linestyles[0],\r\n                    opacity = linestyles[1],\r\n                    width = parseFloat(this.nodeVal(this.get1(lineStyle, 'width')));\r\n                if (color) properties.stroke = color;\r\n                if (!isNaN(opacity)) properties['stroke-opacity'] = opacity;\r\n                if (!isNaN(width)) properties['stroke-width'] = width;\r\n            }\r\n            if (polyStyle) {\r\n                var polystyles = this.kmlColor(this.nodeVal(this.get1(polyStyle, 'color'))),\r\n                    pcolor = polystyles[0],\r\n                    popacity = polystyles[1],\r\n                    fill = this.nodeVal(this.get1(polyStyle, 'fill')),\r\n                    outline = this.nodeVal(this.get1(polyStyle, 'outline'));\r\n                if (pcolor) properties.fill = pcolor;\r\n                if (!isNaN(popacity)) properties['fill-opacity'] = popacity;\r\n                if (fill) properties['fill-opacity'] = fill === '1' ? properties['fill-opacity'] || 1 : 0;\r\n                if (outline) properties['stroke-opacity'] = outline === '1' ? properties['stroke-opacity'] || 1 : 0;\r\n            }\r\n            if (extendedData) {\r\n                var datas = this.get(extendedData, 'Data'),\r\n                    simpleDatas = this.get(extendedData, 'SimpleData');\r\n\r\n                for (i = 0; i < datas.length; i++) {\r\n                    properties[datas[i].getAttribute('name')] = this.nodeVal(this.get1(datas[i], 'value'));\r\n                }\r\n                for (i = 0; i < simpleDatas.length; i++) {\r\n                    properties[simpleDatas[i].getAttribute('name')] = this.nodeVal(simpleDatas[i]);\r\n                }\r\n            }\r\n\r\n            if (visibility) {\r\n                properties.visibility = this.nodeVal(visibility);\r\n            }\r\n\r\n            if (geomsAndTimes.coordTimes.length) {\r\n                properties.coordTimes = (geomsAndTimes.coordTimes.length === 1) ?\r\n                    geomsAndTimes.coordTimes[0] : geomsAndTimes.coordTimes;\r\n            }\r\n\r\n            var feature = {\r\n                type: 'Feature',\r\n                geometry: (geomsAndTimes.geoms.length === 1) ? geomsAndTimes.geoms[0] : {\r\n                    type: 'GeometryCollection',\r\n                    geometries: geomsAndTimes.geoms\r\n                },\r\n                properties: properties\r\n            };\r\n            if (this.attr(root, 'id')) feature.id = this.attr(root, 'id');\r\n            return [feature];\r\n\r\n        } else {\r\n\r\n            var feature = {\r\n                type: 'Feature',\r\n                geometry: (geomsAndTimes.geoms.length === 1) ? geomsAndTimes.geoms[0] : {\r\n                    type: 'GeometryCollection',\r\n                    geometries: geomsAndTimes.geoms\r\n                },\r\n                properties: properties\r\n            };\r\n            if (this.attr(root, 'id')) feature.id = this.attr(root, 'id');\r\n            return [feature];\r\n\r\n        }\r\n\r\n    }\r\n\r\n    processGeojsonFile(fileName, form) {\r\n\r\n        var file = fileName.replace(/^.*[\\\\\\/]/, '')\r\n        var self = this;\r\n        \r\n        this.readTextFile(form.files[0]).then(text => {\r\n\r\n            var geojson = JSON.parse(text);\r\n            var sr = 0;\r\n            if(geojson.crs && geojson.crs.properties){\r\n                var srp = geojson.crs.properties.name.split(\":\");\r\n                sr=srp[srp.length-1];\r\n            }\r\n            var features = [];\r\n\r\n            geojson.features.forEach(f => {\r\n                var esrijson = geojsonToArcGIS(f);\r\n                esrijson.geometry.spatialReference.wkid = sr;\r\n\r\n                features.push(esrijson);\r\n            });\r\n\r\n            if(self.addGeojsonToMap(features, file, \"GEOJSON\"))\r\n                self.uploadPanel.current.toggle();\r\n        });\r\n\r\n    }\r\n\r\n    processShapeFile(fileName, form) {\r\n\r\n        var self = this;\r\n        //self.uploadPanel.current.toggle();\r\n        var name = fileName.split(\".\");\r\n        name = name[0].replace(\"c:\\\\fakepath\\\\\", \"\");\r\n\r\n        var fd = form.files[0];\r\n        const JSZip = require('jszip')();\r\n        \r\n        JSZip.loadAsync(fd).then((zipEntries) => {\r\n            var prjfile = null;\r\n            zipEntries.forEach(function(rp, zipEntry) {\r\n                if(zipEntry.name.indexOf(\".prj\") !== -1){\r\n                    prjfile=zipEntry\r\n                }\r\n            });\r\n            if(prjfile==null){\r\n                document.getElementById(\"upload-status\").innerHTML =\r\n                '<p style=\"color:red\">The expected datums are NAD 83 (wkid 4269) or<br>WGS 84 (wkid 102100 (3857)), the data uploaded<br>was found outside the expected datums and<br>failed to upload, for further information<br>please reference knowledge article<br><a href=\"https://qa-blm.cs32.force.com/s/article/Acceptable-Datums-in-MLRS-NAD83-and-WGS84\" target=\"_blank\">Acceptable Datums in MLRS - NAD83 and WGS84.</a></p>';\r\n                return;\r\n            }\r\n            prjfile.async('text').then(function(text){\r\n                \r\n                var datums = {\r\n                    4269: [\"nad83\",\r\n                        \"northamericandatum1983\",\r\n                        \"gcsnorthamerican1983\",\r\n                        \"dnorthamerican1983\",\r\n                        \"nad83(1986)\",\r\n                        \"nad83(1986)-latlon\",\r\n                        \"nad83(original)\"],\r\n                    3857: [\"wgs84/pseudo-mercator\",\r\n                        \"wgs1984webmercatorauxiliarysphere\",\r\n                        \"wgs84/popularvisualisationpseudo-mercator\",\r\n                        \"webmercator\",\r\n                        \"mercator1sp\"],\r\n                    102100: [\"wgs84/pseudo-mercator\",\r\n                        \"wgs1984webmercatorauxiliarysphere\",\r\n                        \"wgs84/popularvisualisationpseudo-mercator\",\r\n                        \"webmercator\",\r\n                        \"mercator1sp\"],\r\n                    4326: [\"gcswgs1984\",\r\n                        \"dwgs1984\",\r\n                        \"wgs84\",\r\n                        \"wgs1984\",\r\n                        \"worldgeodeticsystem1984\"] \r\n                };                \r\n                if(self.props.uploadSR)\r\n                {\r\n                    var srs = self.props.uploadSR.split(',');\r\n                    var validsr = srs.length<1;\r\n                    for (var i=0; i<srs.length; i++){\r\n                        if(text.includes(srs[i])){\r\n                            validsr=true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(!validsr){\r\n                        text = text.toLowerCase();\r\n                        text = text.replace(/_/g, '');\r\n                        text = text.replace(/\\s/g, '');\r\n                        for (var i=0; i<srs.length; i++){\r\n                            var datum = datums[srs[i]];\r\n                            if(datum){\r\n                                for (var j=0; j<datum.length; j++){\r\n                                    if(text.includes(datum[j])){\r\n                                        validsr=true;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                if(validsr)break;\r\n                            }\r\n                        }\r\n                            \r\n                    }\r\n                    if(!validsr){\r\n                        //TODO should not be hardcoded\r\n                        document.getElementById(\"upload-status\").innerHTML =\r\n                            '<p style=\"color:red\">The expected datums are NAD 83 (wkid 4269) or<br>WGS 84 (wkid 102100 (3857)), the data uploaded<br>was found outside the expected datums and<br>failed to upload, for further information<br>please reference knowledge article<br><a href=\"https://qa-blm.cs32.force.com/s/article/Acceptable-Datums-in-MLRS-NAD83-and-WGS84\" target=\"_blank\">Acceptable Datums in MLRS - NAD83 and WGS84.</a></p>';\r\n                        return false;\r\n                    }\r\n                }\r\n                var parms = {\r\n                    name: name,\r\n                    targetSR: self.state.view.extent.spatialReference,\r\n                    maxRecordCount: 1000,\r\n                    enforceInputFileSizeLimit: true,\r\n                    enforceOutputJsonSizeLimit: true,\r\n                };\r\n        \r\n                parms.generalize = true;\r\n                parms.maxAllowableOffset = 10;\r\n                parms.reducePrecision = true;\r\n                parms.numberOfDigitsAfterDecimal = 0;\r\n                var myContent = {\r\n                    filetype: \"shapefile\",\r\n                    publishParameters: JSON.stringify(parms),\r\n                    f: \"json\",\r\n                    'content-type': 'multipart/form-data',\r\n                };\r\n        \r\n                var portalUrl = \"https://www.arcgis.com\";\r\n        \r\n                var query = Object.keys(myContent)\r\n                    .map(k => escape(k) + '=' + escape(myContent[k]))\r\n                    .join('&');\r\n        \r\n                loadModules(['esri/request'])\r\n                    .then(([request]) => {\r\n                        request(portalUrl + \"/sharing/rest/content/features/generate\",\r\n                            {\r\n                                query: myContent,\r\n                                body: new FormData(form.form),\r\n                                //body: document.getElementById(\"uploadForm\"),\r\n                                responseType: \"json\"\r\n                            })\r\n                            .then(function (response) {\r\n                                var layerName = response.data.featureCollection.layers[0].layerDefinition.name;\r\n                                if(self.addShapefileToMap(response.data.featureCollection, layerName)) \r\n                                    self.uploadPanel.current.toggle();\r\n                            })\r\n                    })\r\n            });\r\n        });\r\n    }\r\n\r\n    addShapefileToMap(featureCollection, layerName) {\r\n        var self = this;\r\n        if(this.props.uploadSR)\r\n        {\r\n            if(featureCollection.layers.length>0 && featureCollection.layers[0].featureSet.features.length>0)\r\n            {\r\n                var sr = featureCollection.layers[0].featureSet.features[0].geometry.spatialReference.wkid;\r\n                var srs = this.props.uploadSR.split(',');\r\n                var validsr = srs.length<1;\r\n                for (var i=0; i<srs.length; i++){\r\n                    if(sr == srs[i]) validsr=true;\r\n                }\r\n\r\n                if(!validsr){\r\n                    //TODO should not be hardcoded\r\n                    document.getElementById(\"upload-status\").innerHTML =\r\n                        '<p style=\"color:red\">The expected datums are NAD 83 (wkid 4269) or<br>WGS 84 (wkid 102100 (3857)), the data uploaded<br>was found outside the expected datums and<br>failed to upload, for further information<br>please reference knowledge article<br><a href=\"https://qa-blm.cs32.force.com/s/article/Acceptable-Datums-in-MLRS-NAD83-and-WGS84\" target=\"_blank\">Acceptable Datums in MLRS - NAD83 and WGS84.</a></p>';\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        loadModules(['esri/Graphic', 'esri/layers/FeatureLayer', 'esri/layers/support/Field', 'esri/PopupTemplate'])\r\n            .then(([Graphic, FeatureLayer, Field, PopupTemplate]) => {\r\n                var sourceGraphics = [];\r\n                var layers = featureCollection.layers.map(function (layer) {\r\n\r\n                    var graphics = layer.featureSet.features.map(function (feature) {\r\n                        var gfx = Graphic.fromJSON(feature);\r\n                        gfx.symbol = {\r\n                            type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                            color: \"rgba(224, 206, 69, 0.8)\",\r\n                            style: \"solid\",\r\n                            outline: {\r\n                                color: \"yellow\",\r\n                                width: 3\r\n                            }\r\n                        };\r\n                        return gfx;\r\n                    });\r\n                    sourceGraphics = sourceGraphics.concat(graphics);\r\n                    var featureLayer = new FeatureLayer({\r\n                        title: \"SHP File: \" + layerName,\r\n                        //objectIDField: \"FID\",\r\n                        source: graphics,\r\n                        fields: layer.layerDefinition.fields.map(function (field) {\r\n                            return Field.fromJSON(field);\r\n                        })\r\n                    });\r\n                    return featureLayer;\r\n\r\n                });\r\n\r\n\r\n                layers[0].title = layerName;\r\n\r\n\r\n                self.state.map.addMany(layers);\r\n\r\n                self.state.view.goTo(sourceGraphics);\r\n\r\n                var props = {\r\n                    title: \"Shape File: \" + layerName,\r\n                    transparency: \".32\",\r\n                    identmaxzoom: \"13\",\r\n                    blockidentselect: true,\r\n                    type: \"geojson\",\r\n                    src: \"\",\r\n                    map: self.state.map,\r\n                    view: self.state.view\r\n                };\r\n\r\n                var aml = new ArcticMapLayer(props);\r\n                aml.layerRef = layers[0];\r\n                aml.context = window._map.layers[0].context;\r\n                aml.layerRef.title = props.title;\r\n\r\n                self.state.map.amlayers.push(aml);\r\n\r\n            });\r\n        return true;\r\n    }\r\n\r\n\r\n    addGeojsonToMap(featureCollection, layerName, filetype) {\r\n        var self = this;\r\n        if(this.props.uploadSR)\r\n        {\r\n            if(featureCollection.length>0)\r\n            {\r\n                var sr = featureCollection[0].geometry.spatialReference.wkid;\r\n                var srs = this.props.uploadSR.split(',');\r\n                var validsr = srs.length<1;\r\n                for (var i=0; i<srs.length; i++){\r\n                    if(sr == srs[i]) validsr=true;\r\n                }\r\n\r\n                if(!validsr){\r\n                    //TODO should not be hardcoded\r\n                    document.getElementById(\"upload-status\").innerHTML =\r\n                        '<p style=\"color:red\">The expected datums are NAD 83 (wkid 4269) or<br>WGS 84 (wkid 102100 (3857)), the data uploaded<br>was found outside the expected datums and<br>failed to upload, for further information<br>please reference knowledge article<br><a href=\"https://qa-blm.cs32.force.com/s/article/Acceptable-Datums-in-MLRS-NAD83-and-WGS84\" target=\"_blank\">Acceptable Datums in MLRS - NAD83 and WGS84.</a></p>';\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        loadModules(['esri/Graphic', 'esri/layers/FeatureLayer', 'esri/layers/support/Field', 'esri/PopupTemplate', \"esri/renderers/SimpleRenderer\"])\r\n            .then(([Graphic, FeatureLayer, Field, PopupTemplate, SimpleRenderer]) => {\r\n                var sourceGraphics = [];\r\n                var symbol = {\r\n                    type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                    color: \"rgba(224, 206, 69, 0.8)\",\r\n                    style: \"solid\",\r\n                    outline: {\r\n                        color: \"red\",\r\n                        width: 2\r\n                    }\r\n                };\r\n\r\n                var i = 0;\r\n                var graphics = featureCollection.map(feature => {\r\n\r\n                    feature.attributes[\"OBJECTID\"] = i++;\r\n                    var gfx = Graphic.fromJSON(feature);\r\n\r\n                    gfx.symbol = symbol;\r\n                    return gfx;\r\n\r\n                });\r\n\r\n\r\n                var featureLayer = new FeatureLayer({\r\n                    title: filetype +\" File: \" + layerName,\r\n                    objectIdField: \"OBJECTID\",\r\n                    //renderer : SimpleRenderer.fromJSON(symbol) ,\r\n                    source: graphics,\r\n                    // fields: layer.layerDefinition.fields.map(function (field) {\r\n                    //     return Field.fromJSON(field);\r\n                    // })\r\n\r\n                });\r\n\r\n\r\n                self.state.map.add(featureLayer);\r\n                self.state.view.goTo(graphics);\r\n\r\n\r\n\r\n\r\n                var props = {\r\n                    title: filetype +\" File: \" + layerName,\r\n                    transparency: \".32\",\r\n                    identmaxzoom: \"13\",\r\n                    blockidentselect: true,\r\n                    type: \"geojson\",\r\n                    src: \"\",\r\n                    map: self.state.map,\r\n                    view: self.state.view\r\n                };\r\n\r\n                var aml = new ArcticMapLayer(props);\r\n                aml.layerRef = featureLayer;\r\n                aml.context = window._map.layers[0].context;\r\n                aml.layerRef.title = props.title;\r\n\r\n                self.state.map.amlayers.push(aml);\r\n            });\r\n        return true;\r\n    }\r\n\r\n    reset() {\r\n        this.state.sketchViewModel.cancel();\r\n        this.state.tempGraphicsLayer.removeAll();\r\n        this.setState({ hideEditors: false, geojson: null });\r\n    }\r\n\r\n    setmaptoselect() {\r\n\r\n        if (this.props.am.state.mode === \"select\") {\r\n            this.props.am.setMode(\"view\");\r\n            this.setState({ mode: \"view\" });\r\n        }\r\n        else {\r\n\r\n            this.props.am.setMode(\"select\");\r\n            this.setState({ mode: \"select\" });\r\n        }\r\n    }\r\n\r\n    widgetRender() {\r\n\r\n        var self = this;\r\n        var children = React.Children.map(this.props.children, function (child) {\r\n\r\n            return React.cloneElement(child, {\r\n                map: self.state.map,\r\n                view: self.state.view,\r\n                //ref: 'child-' + (index++)\r\n                hidden : self.state.hideEditors\r\n            })\r\n\r\n        })\r\n\r\n        if (this.state.hidden === true) {\r\n            return <div id=\"topbar\"></div>;\r\n        }\r\n\r\n        return <div id=\"topbar\">\r\n\r\n            {this.state.hideEditors === false &&\r\n                <span>\r\n                    <ArcticMapButton showactive={this.props.am.state.mode === \"select\"} esriicon='cursor' title='Left click to select / Right click to deselect' onclick={this.setmaptoselect.bind(this)} />\r\n                    {this.props.point &&\r\n\r\n                        <ArcticMapButton esriicon=\"blank-map-pin\" onclick={this.addPointClick.bind(this)} title=\"Draw point\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.line &&\r\n\r\n                        <ArcticMapButton esriicon=\"polyline\" onclick={this.addLineClick.bind(this)} title=\"Draw polyline\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.polygon &&\r\n\r\n                        <ArcticMapButton esriicon=\"polygon\" onclick={this.addPolyClick.bind(this)} title=\"Draw polygon\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.square &&\r\n\r\n                        <ArcticMapButton esriicon=\"checkbox-unchecked\" onclick={this.addRecClick.bind(this)} title=\"Draw rectangle\" ></ArcticMapButton>\r\n                    }\r\n                    {this.props.circle &&\r\n                        <ArcticMapButton esriicon=\"radio-unchecked\" onclick={this.addCircleClick.bind(this)} title=\"Draw circle\" ></ArcticMapButton>\r\n\r\n                    }\r\n                </span>\r\n            }\r\n            {children}\r\n            {this.props.upload &&\r\n                <ArcticMapPanel hidden={this.state.hideEditors} esriicon=\"upload\" title=\"Upload GIS file\" ref={this.uploadPanel} \r\n                infoAreaText={this.props.uploadPanelInfoAreaText}>\r\n                    <br />\r\n                    <form encType=\"multipart/form-data\" method=\"post\" id=\"uploadForm\">\r\n                        <div className=\"field\">\r\n                            <br/>\r\n                            <label className={style.btm_primary_file}>\r\n                                <input type=\"file\" name=\"file\" id=\"inFile\" onChange={this.fileUploaded.bind(this)} />\r\n                                Upload File\r\n                            </label>\r\n                        </div>\r\n                    </form>\r\n                    <br />\r\n                    <span id=\"upload-status\"></span>\r\n                </ArcticMapPanel>}\r\n            <ArcticMapButton esriicon=\"erase\" onclick={this.reset.bind(this)} title=\"Clear selection\" ></ArcticMapButton>\r\n        </div>;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.top_right_node) {\r\n            ReactDOM.render(\r\n                this.widgetRender(),\r\n                this.top_right_node\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (<span>\r\n            {this.state.fileLayer}\r\n        </span>);\r\n    }\r\n\r\n    addGraphic(event) {\r\n        // Create a new graphic and set its geometry to\r\n        // `create-complete` event geometry.\r\n        // const graphic = new Graphic({\r\n        //     geometry: event.geometry,\r\n        //     symbol: sketchViewModel.graphic.symbol\r\n        // });\r\n        // tempGraphicsLayer.add(graphic);\r\n    }\r\n\r\n    updateGraphic(event) {\r\n        // event.graphic is the graphic that user clicked on and its geometry\r\n        // has not been changed. Update its geometry and add it to the layer\r\n        // event.graphic.geometry = event.geometry;\r\n        // tempGraphicsLayer.add(event.graphic);\r\n\r\n        // // set the editGraphic to null update is complete or cancelled.\r\n        // editGraphic = null;\r\n    }\r\n\r\n    setUpClickHandler() {\r\n        var self = this;\r\n        self.state.view.on(\"click\", function (event) {\r\n            event.stopPropagation();\r\n\r\n            self.state.view.hitTest(event).then(function (response) {\r\n                var results = response.results;\r\n                // Found a valid graphic\r\n                if (results.length && results[results.length - 1].graphic && self.map.mode != 'identify') {\r\n                    // Check if we're already editing a graphic\r\n                    // if (!self.state.editGraphic) {\r\n                    // Save a reference to the graphic we intend to update\r\n                    self.state.editGraphic = results[results.length - 1].graphic;\r\n                    // Remove the graphic from the GraphicsLayer\r\n                    // Sketch will handle displaying the graphic while being updated\r\n                    // self.state.tempGraphicsLayer.spatialReference = self.state.editGraphic.geometry.spatialReference;\r\n                    // self.state.view.spatialReference = self.state.editGraphic.geometry.spatialReference;\r\n                    //self.state.tempGraphicsLayer.remove(self.state.editGraphic);\r\n                    self.state.tempGraphicsLayer.graphics = [self.state.editGraphic];\r\n                    //self.state.sketchViewModel.updateGraphics = [self.state.editGraphic];\r\n\r\n                    self.state.sketchViewModel.update([self.state.editGraphic]);\r\n\r\n                    //self.state.tempGraphicsLayer.graphics = [self.state.editGraphic];\r\n\r\n                    //}\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    setActiveButton(selectedButton) {\r\n        // focus the view to activate keyboard shortcuts for sketching\r\n        // view.focus();\r\n        // var elements = document.getElementsByClassName(\"active\");\r\n        // for (var i = 0; i < elements.length; i++) {\r\n        //     elements[i].classList.remove(\"active\");\r\n        // }\r\n        // if (selectedButton) {\r\n        //     selectedButton.classList.add(\"active\");\r\n        // }\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapEdit;","// WY060140N0660W0SN180ANENE\r\n\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport style from './ArcticMapLLDSearch.css';\r\n\r\n//import {\r\n//    loadModules\r\n//} from 'react-arcgis';\r\n\r\n// Use @arcgis/core or esri-loader directly in your React application\r\nimport { setDefaultOptions } from 'esri-loader';\r\n\r\n// configure esri-loader to use version 4.25\r\n// and the CSS for that version from the ArcGIS CDN\r\nsetDefaultOptions({ version: '4.25', css: true, insertCssBefore: 'style' });\r\n\r\nclass ArcticMapLLDSearch extends React.Component {\r\nstatic displayName = 'ArcticMapLLDSearch';\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            map: props.map,\r\n            view: props.view,\r\n            graphic: null\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        loadModules(['esri/Graphic',\r\n            \"esri/geometry/geometryEngine\",\r\n            'esri/geometry/Geometry',\r\n            'esri/geometry/Polygon',\r\n            \"esri/widgets/Search/SearchSource\",\r\n            'esri/request'\r\n\r\n        ]).then(([\r\n            Graphic,\r\n            geometryEngine,\r\n            Geometry,\r\n            Polygon,\r\n            SearchSource,\r\n            esriRequest\r\n\r\n        ]) => {\r\n\r\n\r\n            //var elestring = this.createElementFromHTML( `<input type=\"text\" placeholder=\"Find address or place\" aria-label=\"Search\" autocomplete=\"off\" tabindex=\"0\" class=\"esri-input esri-search__input\" aria-autocomplete=\"list\" aria-haspopup=\"true\" aria-owns=\"1687b00a338-widget-1-suggest-menu\" role=\"textbox\" data-node-ref=\"_inputNode\" title=\"Find address or place\">`);\r\n\r\n            self.top_right_node = document.createElement(\"div\");\r\n\r\n            self.Graphic = Graphic;\r\n            self.Geometry = Geometry;\r\n            self.Polygon = Polygon;\r\n\r\n            self.state.view.ui.add(self.top_right_node, {\r\n                position: \"top-right\",\r\n                index: 0\r\n            });\r\n\r\n\r\n\r\n            // ReactDOM.render(\r\n            //     self.widgetRender(),\r\n            //     self.top_right_node\r\n            // );\r\n\r\n\r\n\r\n            var url = \"https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD\"\r\n\r\n            self.search = new SearchSource({\r\n                    name: 'Legal Land Description',\r\n                    placeholder: \"example: NV 21 T38N R56E SEC 10 ALIQ SESW\",\r\n                   \r\n                    getSuggestions: function (p) {\r\n                        let getIT = function (params) {\r\n                            var searchParams = params.suggestTerm.replace(/\\+/g, ' ');\r\n                            var searchParts = searchParams.trim().replace(/\\s+/g, ' ').split(' ').filter((part) => part!=\"\" );\r\n    \r\n                            if (searchParts.length > 4) {\r\n                                var options = {\r\n                                    query: {\r\n                                        \"legaldescription\": searchParams,\r\n                                        \"returnalllevels\": \"true\",\r\n                                        f: \"pjson\"\r\n                                    },\r\n                                    responseType: \"json\"\r\n                                }\r\n                                return esriRequest(url, options).then(function (results) {\r\n    \r\n                                    return results.data.features.map(function (feature) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: feature.attributes.landdescription,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    });\r\n                                });\r\n                            }\r\n    \r\n                            var PLSSurl = \"https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/1/query\";\r\n    \r\n                            //get the states\r\n                            if (!self.suggestionDictionary) {\r\n                                self.suggestionDictionary = {};\r\n    \r\n                                var queryParams = {\r\n                                    query: {\r\n                                        where: \"STATEABBR IS NOT NULL\",\r\n                                        outFields: \"STATEABBR\",\r\n                                        returnGeometry: \"false\",\r\n                                        returnDistinctValues: \"true\",\r\n                                        f: \"pjson\"\r\n                                    },\r\n                                    responseType: \"json\"\r\n                                };\r\n                                return new Promise((res, rej) => {\r\n                                    esriRequest(PLSSurl, queryParams).then(function (results) {\r\n                                        results.data.features.map(function (feature) {\r\n                                            self.suggestionDictionary[feature.attributes[\"STATEABBR\"]] = null;\r\n                                        });\r\n                                        return getIT(params);\r\n                                    }).then(function (data) {\r\n                                        res(data);\r\n                                    });\r\n    \r\n                                });\r\n                             }\r\n                            if (searchParts === null || searchParts.length === 0) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(Object.keys(self.suggestionDictionary).map(function (state) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: state,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    }));\r\n                                });\r\n                            }\r\n    \r\n                            var states = Object.keys(self.suggestionDictionary).filter((state) => state.indexOf(searchParts[0]) >= 0);\r\n                            if (states.length < 1 || (states.length > 1 && searchParts.length > 1)) {\r\n                                return new Promise((res, rej) => {\r\n                                    res([]);\r\n                                });\r\n                            }\r\n    \r\n                            if (states.length > 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(states.map(function (state) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: state,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n    \r\n                                    }));\r\n                                });\r\n                            }\r\n    \r\n                            //only 1 state get meridians\r\n                            if (!self.suggestionDictionary[states[0]]) {\r\n                                self.suggestionDictionary[states[0]] = {};\r\n    \r\n                                var queryParams = {\r\n                                    query: {\r\n                                        where: \"STATEABBR='\" + states[0] + \"' AND PRINMERCD IS NOT NULL\",\r\n                                        outFields: \"PRINMERCD\",\r\n                                        returnGeometry: \"false\",\r\n                                        returnDistinctValues: \"true\",\r\n                                        f: \"pjson\"\r\n                                    },\r\n                                    responseType: \"json\"\r\n                                };\r\n    \r\n                                return new Promise((res, rej) => {\r\n                                    esriRequest(PLSSurl, queryParams).then(function (results) {\r\n                                        results.data.features.map(function (feature) {\r\n                                            self.suggestionDictionary[states[0]][feature.attributes[\"PRINMERCD\"]] = null;\r\n                                        });\r\n                                        return getIT(params);\r\n                                    }).then(function (data) {\r\n                                        res(data);\r\n                                    });\r\n                                });\r\n                            }\r\n                            var meridianDict = self.suggestionDictionary[states[0]];\r\n                            if (searchParts.length === 1 && meridianDict.length > 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(Object.keys(meridianDict).map(function (meridian) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: states[0] + \" \" + meridian,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    }));\r\n                                });\r\n                            }\r\n                            var meridians = Object.keys(meridianDict);\r\n                            if (searchParts.length > 1) {\r\n                                meridians = Object.keys(meridianDict).filter((meridian) => meridian.indexOf(searchParts[1]) >= 0);\r\n                            }\r\n                            if (meridians.length < 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res([]);\r\n                                });\r\n                            }\r\n                            if (meridians.length > 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(meridians.map(function (meridian) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: states[0] + \" \" + meridian,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    }));\r\n                                });\r\n                            }\r\n                            //only 1 meridian get townships\r\n                            if (!meridianDict[meridians[0]]) {\r\n                                meridianDict[meridians[0]] = {};\r\n    \r\n                                var queryParams = {\r\n                                    query: {\r\n                                        where: \"STATEABBR='\" + states[0] + \"' AND PRINMERCD='\" + meridians[0] + \"' AND TWNSHPNO IS NOT NULL AND (TWNSHPDIR='N' OR TWNSHPDIR='S')\",\r\n                                        outFields: \"TWNSHPNO, TWNSHPDIR\",\r\n                                        returnGeometry: \"false\",\r\n                                        returnDistinctValues: \"true\",\r\n                                        f: \"pjson\"\r\n                                    },\r\n                                    responseType: \"json\"\r\n                                };\r\n                                return new Promise((res, rej) => {\r\n                                    esriRequest(PLSSurl, queryParams).then(function (results) {\r\n                                        results.data.features.map(function (feature) {\r\n                                            var twp = \"T\" + feature.attributes[\"TWNSHPNO\"].replace(/^0+/, '') + feature.attributes[\"TWNSHPDIR\"];\r\n                                            meridianDict[meridians[0]][twp] = null;\r\n                                        });\r\n                                        return getIT(params);\r\n                                    }).then(function (data) {\r\n                                        res(data);\r\n                                    });\r\n                                });\r\n                            }\r\n                            var townshipDict = meridianDict[meridians[0]];\r\n                            if (searchParts.length === 2 && townshipDict.length > 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(Object.keys(townshipDict).map(function (township) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: states[0] + \" \" + meridians[0] + \" \" + township,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    }));\r\n                                });\r\n                            }\r\n                            var townships = Object.keys(townshipDict);\r\n                            if (searchParts.length > 2) {\r\n                                townships = Object.keys(townshipDict).filter((township) => township.indexOf(searchParts[2]) >= 0);\r\n                            }\r\n                            if (townships.length < 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res([]);\r\n                                });\r\n                            }\r\n                            if (townships.length > 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(townships.map(function (township) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: states[0] + \" \" + meridians[0] + \" \" + township,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    }));\r\n                                });\r\n                            }\r\n    \r\n                            //only 1 township get ranges\r\n                            if (!townshipDict[townships[0]]) {\r\n                                townshipDict[townships[0]] = {};\r\n    \r\n                                var twpno = townships[0].substring(1, townships[0].length - 1);\r\n                                var twpdir = townships[0].substring(townships[0].length - 1, townships[0].length)\r\n    \r\n                                var queryParams = {\r\n                                    query: {\r\n                                        where: \"STATEABBR='\" + states[0] + \"' AND PRINMERCD='\" + meridians[0] + \"' AND (TWNSHPNO='\" + twpno + \"' OR TWNSHPNO='\" + twpno.padStart(3, 0) + \"') AND TWNSHPDIR='\" + twpdir + \"' AND RANGENO IS NOT NULL AND (RANGEDIR='E' OR RANGEDIR='W')\",\r\n                                        outFields: \"RANGENO, RANGEDIR\",\r\n                                        returnGeometry: \"false\",\r\n                                        returnDistinctValues: \"true\",\r\n                                        f: \"pjson\"\r\n                                    },\r\n                                    responseType: \"json\"\r\n                                };\r\n                                return new Promise((res, rej) => {\r\n                                    esriRequest(PLSSurl, queryParams).then(function (results) {\r\n                                        results.data.features.map(function (feature) {\r\n                                            var rng = \"R\" + feature.attributes[\"RANGENO\"].replace(/^0+/, '') + feature.attributes[\"RANGEDIR\"];\r\n                                            townshipDict[townships[0]][rng] = null;\r\n                                        });\r\n                                        return getIT(params);\r\n                                    }).then(function (data) {\r\n                                        res(data);\r\n                                    });\r\n                                });\r\n                            }\r\n                            var rangeDict = townshipDict[townships[0]];\r\n                            if (searchParts.length === 3 && rangeDict.length > 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(Object.keys(rangeDict).map(function (range) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: states[0] + \" \" + meridians[0] + \" \" + townships[0] + \" \" + range,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    }));\r\n                                });\r\n                            }\r\n                            var ranges = Object.keys(rangeDict);\r\n                            if (searchParts.length > 3) {\r\n                                ranges = Object.keys(rangeDict).filter((range) => range.indexOf(searchParts[3]) >= 0);\r\n                            }\r\n                            if (ranges.length < 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res([]);\r\n                                });\r\n                            }\r\n                            if (ranges.length > 1) {\r\n                                return new Promise((res, rej) => {\r\n                                    res(ranges.map(function (range) {\r\n                                        return {\r\n                                            key: \"name\",\r\n                                            text: states[0] + \" \" + meridians[0] + \" \" + townships[0] + \" \" + range,\r\n                                            sourceIndex: params.sourceIndex\r\n                                        };\r\n                                    }));\r\n                                });\r\n                            }\r\n    \r\n                            //only 1 range\r\n                            var options = {\r\n                                query: {\r\n                                    \"legaldescription\": states[0] + \" \" + meridians[0] + \" \" + townships[0] + \" \" + ranges[0],\r\n                                    \"returnalllevels\": \"true\",\r\n                                    f: \"pjson\"\r\n                                },\r\n                                responseType: \"json\"\r\n                            }\r\n                            return esriRequest(url, options).then(function (results) {\r\n                                return results.data.features.map(function (feature) {\r\n                                    return {\r\n                                        key: \"name\",\r\n                                        text: feature.attributes.landdescription,\r\n                                        sourceIndex: params.sourceIndex\r\n                                    };\r\n                                });\r\n                            });\r\n                        };\r\n    \r\n                        return getIT(p).then((data) => data);\r\n\r\n                    },\r\n                \r\n                    getResults: function (params) {\r\n                        var serarchParams = params.suggestResult.text.replace(/\\+/g,' ');\r\n                        var options = {\r\n                            query :{\r\n                                \"legaldescription\": serarchParams,\r\n                                \"returnalllevels\": \"true\",\r\n                                f:\"pjson\"\r\n                            },\r\n                            responseType: \"json\"\r\n                        }\r\n\r\n                        return esriRequest(url, options).then(function(results) {\r\n                        \r\n                        var searchResults = results.data.features.map(function (feature) {\r\n\r\n                                var outfeature = Graphic.fromJSON(feature);\r\n\r\n                                var buffer = geometryEngine.geodesicBuffer(outfeature.geometry, 100, \"feet\");\r\n\r\n                                var searchResult = {\r\n                                    extent: buffer.extent,\r\n                                    feature: outfeature,\r\n                                    name: feature.attributes.landdescription\r\n                                };\r\n                                return searchResult;\r\n                            });\r\n                            return searchResults;\r\n                        });\r\n                        \r\n  \r\n                    }\r\n                });\r\n            \r\n\r\n\r\n        });\r\n    }\r\n\r\n    searchLLD(event) {\r\n\r\n        var self = this;\r\n\r\n        fetch(`https://gis.blm.gov/arcgis/rest/services/Cadastral/BLM_Natl_PLSS_CadNSDI/MapServer/exts/CadastralSpecialServices/FindLD?legaldescription=${this.state.searchinput}+&returnalllevels=&f=json`).then(r => r.json()).then(data => {\r\n   \r\n\r\n\r\n            var popupresults = data.features.map(function (feature) {\r\n\r\n                feature.geometry = self.Polygon.fromJSON(feature.geometry);\r\n\r\n                feature = new self.Graphic(feature);\r\n\r\n\r\n                var displayValue = feature.attributes.landdescription;\r\n\r\n\r\n                feature.popupTemplate = { // autocasts as new PopupTemplate()\r\n                    title: 'Legal Land Description',\r\n                    content: `<b>LLD</b>: ${displayValue}`,\r\n                    actions: [{ title: \"Select\", id: \"select-action\" }]\r\n                }\r\n\r\n\r\n\r\n                return feature\r\n            })\r\n\r\n            if (popupresults.length > 0) {\r\n                self.state.view.popup.open({\r\n                    features: popupresults,\r\n                    location: event.mapPoint\r\n                })\r\n\r\n\r\n\r\n\r\n            }\r\n\r\n\r\n        })\r\n\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({ searchinput: event.target.value });\r\n    }\r\n\r\n    widgetRender() {\r\n        return <div className={style.lldsearchbar}>\r\n\r\n\r\n            <div style={{ display: 'inline-block', height: '32px', marginTop: '0px' }}  >\r\n\r\n\r\n                <input style={{ display: 'inline-block', height: '32px', verticalAlign: 'top' }} value={this.state.searchinput} onChange={this.handleChange} type=\"text\" placeholder=\"Find legal land description\" aria-label=\"Search\" className=\"esri-input\" title=\"Find leagal land desription\" />\r\n\r\n                <div style={{ display: 'inline-block', width: '32px', height: '32px', verticalAlign: 'top' }} role=\"button\" title=\"Search\" className=\"esri-search__submit-button esri-widget--button\" onClick={this.searchLLD.bind(this)}>\r\n                    <span style={{ display: 'block', paddingTop: '8px' }} aria-hidden=\"true\" role=\"presentation\" className=\"esri-icon-search\"></span>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n        </div>;\r\n    }\r\n\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default ArcticMapLLDSearch;","import React from 'react';\r\nclass ArcticMapLayerPopup extends React.Component {\r\n    static displayName = 'ArcticMapLayerPopup';\r\n    constructor(props) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n        \r\n        return <span></span>;\r\n\r\n    }\r\n\r\n    renderPopup(context){\r\n        if(this.props.popup){\r\n            return this.props.popup(context);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default ArcticMapLayerPopup;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\n\r\nclass ArcticMapControlArea extends React.Component {\r\n    static displayName = 'ArcticMapControlArea';\r\n    constructor(props) {\r\n        super(props)\r\n        \r\n        this.controlNode = document.createElement(\"div\");\r\n        this.props.view.ui.add(this.controlNode, this.props.location);\r\n        \r\n    }\r\n\r\n    componentDidUpdate() {\r\n        \r\n        if (this.controlNode) {\r\n            ReactDOM.render(this.widgetRender(), this.controlNode, ()=>{\r\n             \r\n            });\r\n        }\r\n    }\r\n\r\n    append(ele){\r\n        this.props.children.push(ele);\r\n    }\r\n\r\n    widgetRender() {\r\n\r\n        var self = this;\r\n        var index = 0\r\n     \r\n\r\n        var children = React.Children.map(this.props.children, function (child) {\r\n          \r\n      \r\n            // else if (child.type.name === 'ArcticMapLLDSearch') {\r\n      \r\n            //   return React.cloneElement(child, {\r\n            //   })\r\n      \r\n            // } \r\n      \r\n            \r\n              return React.cloneElement(child, {\r\n                am : self.props.am,\r\n                map : self.props.am.state.map,\r\n                view : self.props.am.state.view,\r\n                //hostDiv : self.controlNode\r\n                //ref: 'child-' + (index++)\r\n                //ref: (c) => { if (c) { self.childrenElements.push(c); } return 'child-' + (index++) }\r\n              })\r\n            \r\n          });\r\n\r\n          \r\n\r\n        return (<span className='arcticmap-area'>{children}</span>)\r\n    }\r\n    render() {\r\n        return (<span></span>);\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapControlArea;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport ArcticMapButton from './ArcticMapButton';\r\n\r\n\r\n\r\nclass ArcticMapIdentify extends React.Component {\r\n  static displayName = 'ArcticMapIdentify';\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { mode: 1 };\r\n\r\n  }\r\n\r\n  setmaptoidentify() {\r\n    this.props.am.setMode(\"identify\");\r\n    this.setState({ mode: \"identify\" });\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    //cursor\r\n\r\n    return (\r\n      <span>\r\n\r\n        <ArcticMapButton showactive={this.props.am.state.mode === \"description\"} esriicon='description' title='Information' onclick={this.setmaptoidentify.bind(this)} />\r\n          </span>\r\n\r\n\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default ArcticMapIdentify;","import React from \"react\";\r\nimport ReactDOM from 'react-dom'\r\nimport { geojsonToArcGIS } from '@esri/arcgis-to-geojson-utils';\r\nimport ArcticMapButton from './ArcticMapButton';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\nimport ArcticMapControlArea from './ArcticMapControlArea';\r\n//import { loadModules } from 'react-arcgis';\r\n// Use @arcgis/core or esri-loader directly in your React application\r\nimport { setDefaultOptions } from 'esri-loader';\r\n\r\n// configure esri-loader to use version 4.25\r\n// and the CSS for that version from the ArcGIS CDN\r\nsetDefaultOptions({ version: '4.25', css: true, insertCssBefore: 'style' });\r\n\r\nimport styles from './ArcticMap.css';\r\n\r\n\r\nclass ArcticMapBaseControl extends React.Component {\r\n    static displayName = \"ArcticMapBaseControl\";\r\n    constructor(props) {\r\n        super(props)\r\n\r\n       \r\n        this.state = {\r\n            zoomControl: null,\r\n            renderElements: [],\r\n            canReset: this.props.reset !== undefined,\r\n\r\n        }\r\n        var self = this;\r\n        this.zoomControlDiv = document.createElement(\"div\");\r\n        this.layersDiv = document.createElement(\"div\");\r\n        this.legendDiv = document.createElement(\"div\");\r\n\r\n\r\n        loadModules([\r\n            'esri/widgets/Zoom',\r\n            'esri/widgets/LayerList',\r\n            'esri/widgets/Legend',\r\n            'esri/widgets/BasemapGallery',\r\n            'esri/request',\r\n        ]).then(([\r\n            Zoom,\r\n            LayerList,\r\n            Legend,\r\n            BasemapGallery,\r\n            esriRequest,\r\n        ]) => {\r\n\r\n            self.props.view.on('click', (event) => {\r\n\r\n                self.props.view.ui.remove(self.basemapGallery);\r\n\r\n            });\r\n\r\n            self.basemapGallery = new BasemapGallery({\r\n                view: props.view\r\n            })\r\n            self.basemapGallery.watch('activeBasemap', function (newValue, oldValue, property, object) {\r\n                self.props.view.ui.remove(self.basemapGallery);\r\n\r\n            });\r\n\r\n            var zoom = new Zoom({\r\n                view: props.view,\r\n                container: self.zoomControlDiv,\r\n                position: \"top-left\"\r\n            })\r\n            self.state.zoomControl = zoom;\r\n            \r\n            //this.props.hostDiv.appendChild(zoom);\r\n            //props.view.ui.add(zoom, props.hostDiv);\r\n            //self.state.children.push(self.zoomControlDiv);\r\n\r\n            var legend = new Legend({\r\n                view: props.view,\r\n                container: self.legendDiv,\r\n            });\r\n\r\n            this.watchForLegendChanges(legend);\r\n\r\n            var layerList = new LayerList({\r\n                view: props.view,\r\n                container: self.layersDiv,\r\n                listItemCreatedFunction: function (event) {\r\n                    // only legend if imageFormat exist in TOC\r\n                    var actions = [{\r\n                        title: \"Labels on/off\",\r\n                        className: \"esri-icon-checkbox-checked\",\r\n                        id: \"toggle-labels\"\r\n                    },\r\n                    {\r\n                        title: \"Increase opacity\",\r\n                        className: \"esri-icon-up\",\r\n                        id: \"increase-opacity\"\r\n                    },\r\n                    {\r\n                        title: \"Decrease opacity\",\r\n                        className: \"esri-icon-down\",\r\n                        id: \"decrease-opacity\"\r\n                    }];\r\n                    \r\n                    const item = event.item;\r\n                    //console.log(\"item\", item);\r\n                        if (item.layer.imageFormat && item.parent) {\r\n                                // make a request to the server to retrieve the layer image url\r\n                                esriRequest(item.layer.url + \"/legend\", {\r\n                                    query: {\r\n                                        f: 'json'\r\n                                    },\r\n                                    responseType: \"json\"\r\n                                }).then(function (response) {\r\n                                    //console.log(\"response\",response);\r\n                                    var aDiv = document.createElement(\"Div\");\r\n\r\n                                    // build unique url for the legend symbol\r\n                                    for (let i = 0; i < response.data.layers.length; i++) {\r\n                                        var layerNum = i;\r\n\r\n                                        //console.log(\"iLayer\", layerNum, response.data.layers[layerNum]); \r\n                                        if (response.data.layers[layerNum].legend.length === 1){\r\n                                            let img = document.createElement(\"img\");\r\n                                            img.contentType = \"image/png\";\r\n                                            img.style.margin = \"5px\";\r\n                                            img.width = response.data.layers[layerNum].legend[0].width;\r\n                                            img.height = response.data.layers[layerNum].legend[0].height;\r\n                                            img.src = 'data:image/png;base64,'+response.data.layers[layerNum].legend[0].imageData;\r\n                                            //console.log(\"img\", img);    \r\n                                            // assign image to the sublayers in layerlist\r\n                                            var para = document.createElement(\"P\");\r\n                                            para.style.margin = \"5px\";\r\n                                            para.style.verticalAlign = \"middle\";\r\n                                            var theLabel = response.data.layers[layerNum].layerName;\r\n                                            var t =  document.createTextNode(theLabel);\r\n                                            para.appendChild(img);\r\n                                            para.appendChild(t);                                         \r\n                                            aDiv.appendChild(para);\r\n                                            item.panel = {\r\n                                                className: \"esri-icon-layer-list\",\r\n                                                content: [aDiv],\r\n                                                open: false\r\n                                            }\r\n                                        }\r\n                                        else if (response.data.layers[layerNum].legend.length > 1){\r\n                                            for (let j = 0; j < response.data.layers[layerNum].legend.length; j++) {\r\n                                                var legendNum = j;\r\n                                                let img = document.createElement(\"img\");\r\n                                                img.contentType = \"image/png\";\r\n                                                img.style.margin = \"5px\";\r\n                                                img.width = response.data.layers[layerNum].legend[legendNum].width;\r\n                                                img.height = response.data.layers[layerNum].legend[legendNum].height;\r\n                                                img.src = 'data:image/png;base64,'+response.data.layers[layerNum].legend[legendNum].imageData;\r\n                                                //console.log(\"img\", img);\r\n                                                var para = document.createElement(\"P\");\r\n                                                para.style.margin = \"5px\";\r\n                                                para.style.verticalAlign = \"middle\";\r\n                                                var theLabel = response.data.layers[layerNum].legend[legendNum].label;\r\n                                                t =  document.createTextNode(theLabel);\r\n                                                para.appendChild(img);\r\n                                                para.appendChild(t);                                         \r\n                                                aDiv.appendChild(para);\r\n                                            }\r\n                                            item.panel = {\r\n                                                className: \"esri-icon-layer-list\",\r\n                                                content: [aDiv],\r\n                                                open: false\r\n                                            }        \r\n                                        }\r\n\r\n                                    };\r\n                            });\r\n                        }\r\n                        else if (item.layer.imageFormat) {\r\n\t\t\t\t\t\t\titem.panel = {\r\n\t\t\t\t\t\t\t\tcontent: 'legend',\r\n\t\t\t\t\t\t\t\topen: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.panel.watch('open', (isOpen) => {\r\n\t\t\t\t\t\t\t\tself.removeLegendDuplicateLabels();\r\n\t\t\t\t\t\t\t\t//console.log(\"panel\", item);\r\n\t\t\t\t\t\t\t\tlayerList.renderNow();\r\n\t\t\t\t\t\t\t});\r\n                        }                    \r\n                    else {\r\n                        //console.log(\"NotImageItem\",item);\r\n                        if (self.canShowAttributeTable(item.layer.url)) {\r\n                            actions.unshift({\r\n                                title: \"Open Attribute Table\",\r\n                                className: \"esri-icon-table\",\r\n                                id: \"open-attribute-table\"\r\n                            });\r\n                            //actions.unshift({\r\n                            //    title: \"Open Map Service\",\r\n                            //    className: \"esri-icon-launch-link-external\",\r\n                            //    id: \"open-map-service\"\r\n                            //});\r\n                        }\r\n                    }\r\n\r\n                    item.actionsSections = [ actions ];     \r\n                }\r\n            });\r\n            layerList.selectionEnabled = true;\r\n            this.watchForLayerListChanges(layerList);\r\n\r\n            layerList.on(\"trigger-action\", function (event) {\r\n                if (event.action.id === \"toggle-labels\") {\r\n                    if (event.action.className === \"esri-icon-checkbox-unchecked\") {\r\n                        event.action.className = \"esri-icon-checkbox-checked\";\r\n                        event.item.layer.labelsVisible=true;\r\n                    }\r\n                    else {\r\n                        event.action.className = \"esri-icon-checkbox-unchecked\";\r\n                        event.item.layer.labelsVisible=false;\r\n                    }\r\n                    //console.log(event);\r\n                }\r\n                if (event.action.id === \"increase-opacity\") {\r\n                    event.item.layer.opacity += 0.1;\r\n                    event.item.layer.opacity >= 1 ? event.item.layer.opacity = 1:  event.item.layer.opacity;\r\n                }\r\n                if (event.action.id === \"decrease-opacity\") {\r\n                    event.item.layer.opacity -= 0.1;\r\n                    event.item.layer.opacity <= 0 ? event.item.layer.opacity = 0:  event.item.layer.opacity;\r\n                }\r\n                if (event.action.id === \"open-attribute-table\") {\r\n                    self.props.openAttributesTable({\r\n                        view: self.props.view,\r\n                        url: event.item.layer.url,\r\n                        title: event.item.layer.title,\r\n                        fields: self.getAttributeTableLayerFields(event.item.layer.url),\r\n                        hiddenFields: self.getAttributeTableLayerHiddenFields(event.item.layer.url)\r\n                      });\r\n                }\r\n                if (event.action.id === \"open-map-service\") {\r\n                    self.props.openMapService({\r\n                        url: event.item.layer.url\r\n                      });                    \r\n                }\r\n            });\r\n            //self.state.view.ui.add(layerList, 'top-left')\r\n            //var joined = self.state.renderElements.concat(self.zoomControlDiv);\r\n            this.setState({ renderElements: self.state.renderElements.concat(self.zoomControlDiv) })\r\n        })\r\n\r\n    }\r\n\r\n    canShowAttributeTable = (layerUrl) => {\r\n        if (this.props.attributesTableLayers && this.props.attributesTableLayers.length > 0) {\r\n            return this.props.attributesTableLayers.some((lyr) => {\r\n                return lyr.url === layerUrl;\r\n            });\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getAttributeTableLayerFields = (layerUrl) => {\r\n        if (this.props.attributesTableLayers && this.props.attributesTableLayers.length > 0) {\r\n            const layer = this.props.attributesTableLayers.find((lyr) => {\r\n                return lyr.url === layerUrl;\r\n            });\r\n            if (layer && layer.fields && layer.fields.length > 0) {\r\n                return layer.fields;\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    getAttributeTableLayerHiddenFields = (layerUrl) => {\r\n        if (this.props.attributesTableLayers && this.props.attributesTableLayers.length > 0) {\r\n            const layer = this.props.attributesTableLayers.find((lyr) => {\r\n                return lyr.url === layerUrl;\r\n            });\r\n            if (layer && layer.hiddenFields && layer.hiddenFields.length > 0) {\r\n                return layer.hiddenFields;\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    handleShowBasemaps() {\r\n\r\n    }\r\n\r\n    renderZoomcontrol() {\r\n        \r\n        return this.zoomControlDiv;\r\n    }\r\n\r\n    basemapclick() {\r\n        this.props.view.ui.add(this.basemapGallery, {\r\n            position: 'bottom-right'\r\n        })\r\n        //this.setState({ hideBasemapButton: true })\r\n        // self.state.view.ui.remove(self.basemapGallery);\r\n    }\r\n\r\n    watchForLegendChanges = (legend) => {\r\n        \r\n        this.getGroupLayerSymbology(legend);\r\n\r\n        //console.log(\"legendLayers\", legend.view.map.layers)\r\n        legend.watch('activeLayerInfos.length', (len) => {\r\n            this.removeLegendDuplicateLabels();\r\n        });\r\n        legend.view.watch('stationary', (stationary) => {\r\n            if (stationary) {\r\n                this.removeLegendDuplicateLabels();\r\n            }\r\n        });\r\n        legend.view.map.layers.on(\"after-changes\", (event) => {\r\n            legend.view.map.layers.forEach((layer) => {\r\n                //console.log(\"layer\", layer);\r\n                if (layer.allSublayers) {\r\n                    layer.allSublayers.forEach((subLayer) => {\r\n                        subLayer.watch('visible', (visible) => {\r\n                            this.removeLegendDuplicateLabels();\r\n                        });\r\n                    });\r\n                }\r\n                layer.watch('visible', (visible) => {\r\n                    this.removeLegendDuplicateLabels();\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    watchForLayerListChanges = (layerList) => {\r\n        layerList.view.map.layers.on(\"after-changes\", (event) => {\r\n            //console.log(\"viewModel\",layerList.viewModel);\r\n            const viewModel = layerList.viewModel;\r\n        });\r\n    }\r\n\r\n    removeLegendDuplicateLabels = () => {\r\n        setTimeout(() => {\r\n            const elements = document.getElementsByClassName(\"esri-legend__layer-body\");\r\n            //console.log(\"elements\", elements);\r\n            for (let i = 0; i < elements.length; i++) {\r\n                if (elements[i].childNodes && elements[i].childNodes.length > 2) {\r\n                    const element = elements[i];\r\n                    let label = \"\";\r\n                    for (let i = 0; i < element.childNodes.length; i++) {\r\n                        const childNodeI = element.childNodes[i];\r\n                        for (let k = i + 1; k < element.childNodes.length; k++) {\r\n                            const childNodeK = element.childNodes[k];\r\n                            if (element.childNodes[i].innerText == element.childNodes[k].innerText) {\r\n                                childNodeK.classList.add(\"arctic-map-hidden\");\r\n                            }\r\n                        }\r\n                    }                                        \r\n                    for (let index = 0; index < element.childNodes.length; index++) {\r\n                        const childNode = element.childNodes[index];\r\n                        if (childNode.childNodes.length === 2) {\r\n                            const innerText = childNode.childNodes[1].innerText;\r\n                            if (innerText && innerText === label && innerText !== '\\t') {\r\n                                if (!childNode.classList.contains(\"arctic-map-hidden\")) {\r\n                                  childNode.classList.add(\"arctic-map-hidden\");\r\n                                }\r\n                            }\r\n                            label = innerText;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, 2000);\r\n    }\r\n\r\n    getGroupLayerSymbology = (legend) => {\r\n        const elements = document.getElementsByClassName(\"esri-legend__layer-body\");\r\n        //console.log(\"elements\", elements);\r\n        for (let index = 0; index < elements.length; index++) {\r\n            const childNode = elements.childNodes[index];\r\n            //console.log(\"childNode\", childNode.innerText);\r\n        }\r\n        legend.view.map.layers.forEach((layer) => {\r\n        if (layer.type===\"group\") {\r\n            //console.log(\"groupLayer\", layer);\r\n        }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div >\r\n\r\n                <ArcticMapControlArea am={this.props.am} view={this.props.view} location=\"top-left\">\r\n                    <div ref={(e) => { e && e.appendChild(this.zoomControlDiv) }} />\r\n                </ArcticMapControlArea>\r\n\r\n                <ArcticMapControlArea am={this.props.am} view={this.props.view} location=\"bottom-right\" className={styles.ArcticMap} >\r\n                    <ArcticMapPanel  esriicon='layer-list' title='Legend' ontoggle={this.removeLegendDuplicateLabels.bind(this)}>\r\n                        <div ref={(e) => { e && e.appendChild(this.legendDiv) }} />\r\n                    </ArcticMapPanel>\r\n                    <ArcticMapPanel esriicon='collection' title='Layers' >\r\n                    <p>Toggle visibility of each data layer.</p><p>Click, drag and drop layers to reorder.</p>\r\n                        {this.state.canReset &&\r\n                            <p><a href=\"#\" style={{ color: '#71A3AF', textDecoration: 'none' }} onClick={this.props.reset}>\r\n                                <span style={{ height: \"10px\", width: \"10px\", marginRight: '10px', color: 'black' }} aria-hidden className=\"esri-icon esri-icon-trash\" ></span>\r\n                                Reset to Default Data Visibility</a></p>\r\n                        }\r\n                        <div ref={(e) => { e && e.appendChild(this.layersDiv) }} />\r\n                    </ArcticMapPanel>\r\n                    <ArcticMapButton esriicon='basemap' title='Basemaps' onclick={this.basemapclick.bind(this)} />\r\n                </ArcticMapControlArea>\r\n\r\n\r\n\r\n\r\n            </div>\r\n\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default ArcticMapBaseControl;\r\n","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\n\r\nclass ArcticMapLayerRenderer extends React.Component {\r\n    static displayName = 'ArcticMapLayerRenderer';\r\n    constructor(props) {\r\n        super(props)\r\n        if(props.style === undefined){\r\n            console.log(\"Missing style: Build Styles @ https://developers.arcgis.com/javascript/latest/sample-code/playground/live/index.html\")\r\n        }\r\n      \r\n    }\r\n\r\n   \r\n    render() {\r\n        return (<span></span>);\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapLayerRenderer;","import React from \"react\";\r\nimport ReactDOM from 'react-dom'\r\n\r\n//import {\r\n//    loadModules\r\n//} from 'react-arcgis';\r\n\r\n// Use @arcgis/core or esri-loader directly in your React application\r\nimport { setDefaultOptions } from 'esri-loader';\r\n\r\n// configure esri-loader to use version 4.25\r\n// and the CSS for that version from the ArcGIS CDN\r\nsetDefaultOptions({ version: '4.25', css: true, insertCssBefore: 'style' });\r\n\r\nclass ArcticMapLocator extends React.Component {\r\n    static displayName = \"ArcticMapLocator\";\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        loadModules([\r\n\r\n            'esri/widgets/Locate',\r\n            'esri/widgets/BasemapGallery',\r\n            'esri/widgets/Home',\r\n      \r\n            'esri/widgets/Search',\r\n            'esri/layers/FeatureLayer',\r\n            'esri/rest/locator',\r\n            'esri/geometry/geometryEngine',\r\n      \r\n            \"esri/request\",\r\n      \r\n          ]).then(([\r\n      \r\n            Locate,\r\n            BasemapGallery,\r\n            Home,\r\n      \r\n            Search,\r\n            FeatureLayer,\r\n            Locator,\r\n            geometryEngine,\r\n      \r\n            Request,\r\n      \r\n          ]) => {\r\n            var searchsources = []\r\n            \r\n            \r\n            var devaultSource = {\r\n              locator: new Locator({ url: \"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer\" }),\r\n              singleLineFieldName: \"SingleLine\",\r\n              name: \"Standard Geocoder\",\r\n              placeholder: \"Find address\",\r\n              maxResults: 3,\r\n              maxSuggestions: 6,\r\n              suggestionsEnabled: true,\r\n              minSuggestCharacters: 0\r\n            }\r\n            searchsources.push(devaultSource);\r\n            var searchitems = self.props.am.childrenElements.filter(ele => {\r\n\r\n                if (ele.search) {\r\n                  return ele;\r\n                }\r\n                // if (ele.constructor.name.toLowerCase().includes('search')) {\r\n                //   return ele;\r\n                // }\r\n      \r\n              });\r\n\r\n            var lldsSarchsources = searchitems.map(i => {\r\n                if (i.search) { return i.search; }\r\n            });\r\n\r\n            searchsources.push(lldsSarchsources[0]);\r\n           \r\n            if (self.props.searchSources) {\r\n                self.props.searchSources.map(searchSource => {\r\n                  \r\n                  var searchFeature = new FeatureLayer({\r\n                    url: searchSource.scr + searchSource.layerid\r\n                  });\r\n                  searchSource.layer=searchFeature;\r\n    \r\n                  searchsources.push(searchSource);\r\n                })\r\n              }\r\n\r\n            let locationServicesEnabled = true;  \r\n            if (self.props.locationServicesEnabled !== undefined) {\r\n              locationServicesEnabled = self.props.locationServicesEnabled;\r\n            }\r\n\r\n            var searchWidget2 = new Search({\r\n                view: self.props.view,\r\n                sources: searchsources,\r\n                includeDefaultSources: false, // true will include standard locator\r\n                locationEnabled: locationServicesEnabled\r\n            });\r\n\r\n            self.props.view.ui.add(searchWidget2, {\r\n                position: \"top-right\",\r\n                index: 1\r\n            });\r\n\r\n            searchWidget2.on('select-result', function (evt) {\r\n\r\n                self.props.view.popup.currentSearchResultFeature = evt.result.feature;\r\n                self.props.view.popup.close();\r\n                //self.props.view.popup.close();\r\n                // view.popup.open({\r\n                //  location: evt.result.feature.geometry,  // location of the click on the view\r\n                //  feature: evt.result.feature,\r\n                //  title: \"Search Result\",  // title displayed in the popup\r\n                //  content: evt.result.name, // content displayed in the popup\r\n                // });\r\n              });\r\n\r\n        });\r\n\r\n\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default ArcticMapLocator;","import React from \"react\";\r\nimport ReactDOM from 'react-dom';\r\nimport ArcticMapPanel from './ArcticMapPanel';\r\nimport styles from './ArcticMapDatagrid.css';\r\n\r\n//import {\r\n//    loadModules\r\n//} from 'react-arcgis';\r\n\r\n// Use @arcgis/core or esri-loader directly in your React application\r\nimport { setDefaultOptions } from 'esri-loader';\r\n\r\n// configure esri-loader to use version 4.25\r\n// and the CSS for that version from the ArcGIS CDN\r\nsetDefaultOptions({ version: '4.25', css: true, insertCssBefore: 'style' });\r\n\r\nclass ArcticMapDatagrid extends React.Component {\r\n    static displayName = \"ArcticMapDatagrid\";\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = \"review\"\r\n        console.log( \"ArcticMapDatagrid constructor \", this);\r\n        \r\n        // const drawBox = props.view.on('drag', (event) => {\r\n        //     console.log(\"view drag\");\r\n        //     this.drawTempGraphic(this.props.view, event);\r\n        //     event.stopPropagation();\r\n        // })\r\n    }\r\n    _getPrintLayout() {\r\n        console.log(\"gridclick *****\");\r\n    }\r\n\r\n    onRowClickHandler(event) {\r\n      console.log(\"onRowClickHandler\", event.rows[0].data);\r\n      \r\n      \r\n    }\r\n\r\n    componentDidMount() {\r\n      console.log(\"componentDidMount  *****\", this);\r\n      loadModules([\r\n        \"dgrid/Grid\",\r\n        \"dgrid/Selection\",\r\n        'dojo/_base/declare',\r\n        'esri/layers/FeatureLayer',\r\n        'dojo/on'\r\n      ]).then(([\r\n        Grid,\r\n        Selection,\r\n        declare,\r\n        FeatureLayer,\r\n        on\r\n\r\n      ]) => {\r\n        var myGrid = declare([Grid, Selection]);\r\n        var self = this;\r\n        var caseFeatureLayer = new FeatureLayer({\r\n          url: self.props.src,\r\n          outFields: [\"*\"],\r\n          visible: false\r\n        });\r\n        var query = caseFeatureLayer.createQuery();\r\n        query.where = \"1=1\";\r\n        query.outFields = self.props.outFields; // [ \"CSE_NR\", \"BLM_PROD\", \"CSE_TYPE_NR\", \"LEG_CSE_NR\", \"STATUS\",\"SRC\", \"CSE_META\", \"RCRD_ACRS\", \"GIS_ACRS\", \"PLSSIDS\", \"CMMDTY\", \"FRMTN\", \"EDOA\", \"PRDCNG\", \"OPRTR\"];\r\n        caseFeatureLayer.queryFeatures(query)\r\n        .then(function(response){\r\n\r\n          var featureColumns = response.fields.map( outField => {\r\n            var newColumn = {\r\n              'field': outField.name,\r\n              'label': outField.alias}\r\n            return newColumn;\r\n          });\r\n\r\n          \r\n          var items = response.features.map(feature => {\r\n            return feature.attributes;\r\n          });\r\n          var grid = new myGrid({\r\n            columns: featureColumns, \r\n              selectionMode: 'single',\r\n            }, \"arcticmapdatagrid\");\r\n          \r\n          grid.renderArray(items);\r\n\r\n          grid.on(\"dgrid-select\", self.onRowClickHandler); \r\n        });\r\n\r\n\r\n      \r\n        \r\n\r\n      })\r\n    }\r\n    \r\n    \r\n    render() {\r\n        \r\n        return (\r\n            <div id=\"arcticmapdatagrid\" className={styles.gridcontainer} >\r\n\r\n            </div>\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapDatagrid;","import React from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport ArcticMapButton from './ArcticMapButton';\r\n\r\nvar styles = {\r\n    rightWidgetFull: {\r\n        \"position\": \"absolute\",\r\n        \"left\": \"20px\",\r\n        \"top\": \"410px\",\r\n        \"bottom\": \"2px\",\r\n        \"zIndex\": \"100\",\r\n\r\n        \"minWidth\": '95%',\r\n        \"paddingTop\": '10px'\r\n    },\r\n    widgetContainer: {\r\n        \"position\": 'realative',\r\n        \"paddingRight\": \"10px\",\r\n        \"paddingLeft\": \"10px\",\r\n        \"paddingBottom\": \"50px\",\r\n       \r\n        \"overflowY\": 'auto',\r\n        \"maxHeight\": '100%'\r\n    }\r\n\r\n};\r\n\r\nclass ArcticMapDGridPanel extends React.Component {\r\n    static displayName = 'ArcticMapDGriPanel';\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.toggle = function () {\r\n\r\n            var currvalue = this.state.open;\r\n            this.setState({ open: !currvalue });\r\n        };\r\n        this.toggle = this.toggle.bind(this);\r\n\r\n        this.mapFrame = document.getElementsByClassName('esri-view-root')[0];\r\n        this.renderEle = document.createElement(\"span\");\r\n        this.mapFrame.appendChild(this.renderEle);\r\n        this.state = {\r\n            hidden: !this.props.hidden ? false : true,\r\n            open: this.props.open || false\r\n        };\r\n     \r\n        if(props.map){\r\n            this.map = props.map;\r\n        }\r\n        if(props.view){\r\n            this.view = props.view;\r\n            this.view.on('click', (e) => {\r\n                this.setState({ open: false });\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        var self = this;\r\n        \r\n        // console.log(self.props);\r\n        // self.props.view.on('click', (event) => {\r\n\r\n        //     self.setState({ open: false });\r\n\r\n        // });\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.renderPanel();\r\n    }\r\n\r\n    render() {\r\n\r\n        return (<span visibility={this.state.hidden}><ArcticMapButton padtop={this.props.padtop} padbottom={this.props.padbottom} esriicon={this.props.esriicon} onclick={this.toggle.bind(this)} title={this.props.title} ></ArcticMapButton></span>);\r\n    }\r\n    renderPanel() {\r\n        // refactor this\r\n        if (this.state.open) {\r\n            var ele = React.createElement(\r\n                'div',\r\n                { className: 'esri-widget', style: styles.rightWidgetFull },\r\n                React.createElement(\r\n                    'h2',\r\n                    { style: { \"paddingLeft\": \"20px\", marginTop: '6px',  fontSize: '15px', marginBottom : '10px' } },\r\n                    this.props.title\r\n                ),\r\n                React.createElement(\r\n                    'span',\r\n                    { style: { position: 'absolute', top: '20px', right: '20px' } },\r\n                    React.createElement(\r\n                        'button',\r\n                        {\r\n                            onClick : this.toggle,\r\n                            title : 'Close',\r\n                            style : { border : 'none', background : 'transparent', cursor : 'pointer'}\r\n                        },\r\n                        React.createElement(\r\n                            'span',\r\n                            {\r\n                               style : { fontSize: '15px' },\r\n                               'aria-hidden' : true,\r\n                               className : 'esri-icon esri-icon-close'\r\n                            },\r\n                            \r\n                        )\r\n                    )\r\n                    //React.createElement(ArcticMapButton, { esriicon: 'close', onclick: this.toggle, style : { fontSize : '28px'} })\r\n                ),\r\n                React.createElement(\r\n                    'div',\r\n                    { style: styles.widgetContainer },\r\n                    React.createElement(\r\n                        'div',\r\n                        null,\r\n                        this.props.children\r\n                    )\r\n                )\r\n            );\r\n\r\n            // <button style={style.arcticButton} onClick={this.fireclick.bind(this)} title={this.props.title} >\r\n            //     <span style={{ height: \"15px\", width: \"15px\" }} aria-hidden className={esriClassName} ></span>\r\n            // </button>\r\n\r\n            ReactDOM.render(ele, this.renderEle);\r\n        } else {\r\n            var eleempty = React.createElement('span', null);\r\n            ReactDOM.render(eleempty, this.renderEle);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default ArcticMapDGridPanel"],"names":["ArcticMapButton","props","state","esriicon","showactive","undefined","fireclick","e","onclick","style","padtop","arcticButton","marginTop","padbottom","marginBOttom","useEsriIcon","backgroundColor","esriClassName","React","bind","title","height","width","Component","displayName","loadingtext","ArcticMapLoader","loading","bg","styles","ArcticMapPanel","toggle","currvalue","open","setState","ontoggle","mapFrame","document","getElementsByClassName","renderEle","createElement","appendChild","hidden","defaultProps","map","view","on","renderPanel","ele","className","rightWidgetFull","fontSize","marginBottom","position","top","right","border","background","cursor","paddingLeft","wordWrap","margin","whiteSpace","infoAreaText","widgetContainer","children","render","eleempty","id","innerHTML","head","ArcticMap","lat","lng","mode","basemap","Number","parseInt","sr","handleMapLoad","handleMapClick","layers","self","index","childrenElements","Children","child","type","cloneElement","c","push","sort","l","reverse","event","ui","add","basemapGallery","hideBasemapButton","htmlString","div","trim","firstChild","json","nofire","editor","setEditFeature","val","graphics","removeAll","pt1","toMap","x","origin","y","pt2","rings","then","Polygon","Graphic","tempPolygon","spatialReference","tempSymbol","tempPolygonGraphic","action","amlayers","centerSplit","center","split","parseFloat","zoom","cntrlIsPressed","Locate","BasemapGallery","Home","Search","FeatureLayer","Locator","geometryEngine","IdentifyParameters","Request","_request","_map","request","popup","dockEnabled","dockOptions","watch","visible","graphic","graphicTemplate","getEffectivePopupTemplate","geometry","actions","items","SimpleFillSymbol","symbol","popupGraphic","content","viewModel","selectedFeature","close","addEventListener","which","contextmenuPressed","log","drawTempGraphic","stopPropagation","vw","pt","idParams","dragStart","tolerance","filter","layer","params","mapExtent","extent","identifyTask","execute","response","button","editing","identresults","identLayers","allowMultiSelect","mapzoom","identMaxZoom","concat","eachSeries","cb","disablePopup","identifyArea","results","err","ir","forEach","res","reduce","a","b","flat","feature","idx","length","goTo","remove","currentmode","setMode","layerRef","sublayers","visibleLayers","noFilter","s","nofilter","isLayerVisible","lyr","isVisible","parent","url","allSublayers","sub","subLayers","subSub","identify","resultslist","rem","includes","layerId","splice","findIndex","r","remid","acres","geodesicArea","r1","r2","popupresults","result","layerName","attributes","sublayer","find","layerUrl","layerRenderers","popupDisable","layerid","toString","disabled","PTActions","blockSelect","popupTemplate","renderPopupTitle","renderPopup","i","currentSearchResultFeature","mapPoint","fType","locate","locateBtn","newValue","oldValue","property","object","home","homeBtn","getEditFeature","tempGraphicsLayer","evt","Event","bubbles","defineProperty","value","enumerable","onmapready","ArcticMapLayer","blockIdentSelect","MapImageLayer","ImageryLayer","GraphicsLayer","Point","SimpleMarkerSymbol","GroupLayer","Renderer","children2","subchildren","subchild","childrenEles","Array","isArray","renderers","flayers","gmaplayer","trans","transparency","glayer","gtrans","portalItem","src","renderer","featureLayer","opacity","subChildren","gbmaplayer","maplayer","childsrc","when","layerids","displayTitle","layerIds","layerOption","returnGeometry","srcsplit","imagelayer","onready","popupTitle","popuptitle","popuprender","workingdiv","popupText","atts","Object","getOwnPropertyNames","att","callback","hitTest","htresponse","layersLeft","responses","queryFeatures","features","feat","allResponse","allSettled","item","Promise","rej","eventPS","eventPE","Multipoint","points","addPoint","ArcticMapEdit","uploadPanel","createRef","SketchViewModel","Geometry","Polyline","listMode","sketchViewModel","updateongraphicclick","updateOnGraphicClick","setUpClickHandler","single","hideEditors","geojson","arcgisToGeoJSON","toJSON","datajson","firenewfeature","editGraphic","top_right_node","loaded","zoomto","addto","sourceLayer","cancel","fromJSON","polygonSymbol","polylineSymbol","geometrys","merge","union","isEqual","equals","difference","setGeoJson","data","onnewfeature","create","fileName","target","toLowerCase","indexOf","processShapeFile","processKMLFile","processGeojsonFile","processGMLFile","processGPXFile","getElementById","file","fr","FileReader","onload","readAsText","v","color","substr","isNaN","form","replace","readTextFile","files","parser","DOMParser","gj","fc","xmlDoc","parseFromString","text","trkMember","get","j","getTRKMember","esrijson","geojsonToArcGIS","f","addGeojsonToMap","current","root","geometryProperty","geomsCoord","getGeometry","geoms","attr","LineString","srp","nodeValue","featureMember","getFeatureMember","wkid","geotypes","geomNode","geomNodes","k","coordTimes","get1","coords","coord1","nodeVal","coord","track","gxCoords","times","norm","textContent","str","serializer","XMLSerializer","xml","serializeToString","h","charCodeAt","getElementsByTagName","getAttribute","n","el","normalize","removeSpace","numarray","trimSpace","splitSpace","o","elems","gxCoord","timeElems","placemarks","styleMaps","styleIndex","styleByHash","styleMapIndex","hash","okhash","xml2str","pairs","pairsMap","m","getPlacemark","geomsAndTimes","properties","name","address","styleUrl","description","timeSpan","timeStamp","extendedData","lineStyle","polyStyle","visibility","styleHash","styleMapHash","normal","iconStyle","icon","href","begin","end","timespan","timestamp","linestyles","kmlColor","stroke","polystyles","pcolor","popacity","fill","outline","datas","simpleDatas","JSON","parse","crs","fd","JSZip","require","loadAsync","zipEntries","prjfile","rp","zipEntry","async","datums","uploadSR","srs","validsr","datum","parms","generalize","maxAllowableOffset","reducePrecision","numberOfDigitsAfterDecimal","myContent","stringify","portalUrl","query","keys","escape","join","FormData","featureCollection","layerDefinition","addShapefileToMap","featureSet","Field","PopupTemplate","sourceGraphics","gfx","fields","field","addMany","aml","context","window","filetype","SimpleRenderer","am","setmaptoselect","point","addPointClick","line","addLineClick","polygon","addPolyClick","square","addRecClick","circle","addCircleClick","upload","uploadPanelInfoAreaText","btm_primary_file","fileUploaded","reset","widgetRender","fileLayer","update","selectedButton","ArcticMapLLDSearch","handleChange","SearchSource","esriRequest","search","p","getIT","searchParams","suggestTerm","searchParts","part","options","landdescription","sourceIndex","PLSSurl","suggestionDictionary","queryParams","states","meridianDict","meridian","meridians","twp","townshipDict","township","townships","twpno","substring","twpdir","padStart","rng","rangeDict","range","ranges","serarchParams","suggestResult","searchResults","outfeature","buffer","geodesicBuffer","searchResult","searchinput","displayValue","lldsearchbar","display","verticalAlign","searchLLD","paddingTop","ArcticMapLayerPopup","ArcticMapControlArea","controlNode","location","ArcticMapIdentify","setmaptoidentify","ArcticMapBaseControl","canShowAttributeTable","attributesTableLayers","some","getAttributeTableLayerFields","getAttributeTableLayerHiddenFields","hiddenFields","watchForLegendChanges","legend","getGroupLayerSymbology","len","removeLegendDuplicateLabels","stationary","subLayer","watchForLayerListChanges","layerList","elements","childNodes","element","label","childNodeI","childNodeK","innerText","classList","childNode","contains","zoomControlDiv","layersDiv","legendDiv","Zoom","LayerList","Legend","zoomControl","imageFormat","aDiv","layerNum","img","contentType","imageData","para","theLabel","t","createTextNode","panel","legendNum","isOpen","renderNow","unshift","actionsSections","selectionEnabled","labelsVisible","openAttributesTable","openMapService","renderElements","canReset","textDecoration","marginRight","basemapclick","ArcticMapLayerRenderer","ArcticMapLocator","searchsources","devaultSource","searchitems","lldsSarchsources","searchSources","searchFeature","searchSource","scr","locationServicesEnabled","searchWidget2","ArcticMapDatagrid","rows","Grid","Selection","declare","myGrid","caseFeatureLayer","createQuery","where","outFields","featureColumns","newColumn","outField","alias","grid","renderArray","onRowClickHandler","gridcontainer","ArcticMapDGridPanel"],"mappings":"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"}